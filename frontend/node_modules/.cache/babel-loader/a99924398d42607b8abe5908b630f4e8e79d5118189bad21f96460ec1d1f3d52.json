{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      error: \"\",\n      success: \"\"\n    };\n  },\n  methods: {\n    async login() {\n      // Clear old session before login\n      localStorage.removeItem(\"user\");\n      localStorage.removeItem(\"token\");\n      delete axios.defaults.headers.common[\"Authorization\"];\n      try {\n        const response = await axios.post(\"http://localhost:8080/auth/login\", {\n          email: this.email,\n          password: this.password\n        });\n        const token = response.data.token;\n        const user = response.data.user || response.data; // adjust if user is nested\n\n        if (token) {\n          // Save session\n          localStorage.setItem(\"token\", token);\n          localStorage.setItem(\"user\", JSON.stringify(user));\n          axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n          this.success = \"Login successful!\";\n          this.error = \"\";\n\n          // Redirect after short delay\n          setTimeout(() => {\n            this.redirectUser(\"UserDashboard\"); // Change to your desired route name\n          }, 1000);\n        } else {\n          this.error = \"Login failed: token not received.\";\n          this.success = \"\";\n        }\n      } catch (err) {\n        this.error = \"Invalid credentials. Please try again.\";\n        this.success = \"\";\n        console.error(\"Login failed:\", err);\n      }\n    },\n    redirectUser(routeName) {\n      this.$router.replace({\n        name: routeName\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","email","password","error","success","methods","login","localStorage","removeItem","defaults","headers","common","response","post","token","user","setItem","JSON","stringify","setTimeout","redirectUser","err","console","routeName","$router","replace"],"sources":["C:\\projet stage 2\\final\\hello-word-vue\\src\\components\\LoginPage.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <!-- Gradient Header -->\n    <div class=\"login-header bg-primary-gradient\">\n      <div class=\"container py-5\">\n        <h1 class=\"text-center text-white display-5 fw-bold\">Welcome Back</h1>\n      </div>\n    </div>\n\n    <!-- Login Card -->\n    <div class=\"container py-5\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-8 col-lg-6\">\n          <div class=\"card shadow-lg border-0\">\n            <div class=\"card-body p-4 p-md-5\">\n              <form @submit.prevent=\"login\">\n                <!-- Email Input -->\n                <div class=\"form-floating mb-4\">\n                  <input type=\"text\" class=\"form-control\" id=\"email\" v-model=\"email\" required autocomplete=\"email\"\n                    placeholder=\"name@example.com\" />\n                  <label for=\"email\">\n                    <i class=\"bi bi-envelope-fill me-2\"></i>Email address\n                  </label>\n                </div>\n\n                <!-- Password Input -->\n                <div class=\"form-floating mb-4\">\n                  <input type=\"password\" class=\"form-control\" id=\"password\" v-model=\"password\" required\n                    autocomplete=\"current-password\" placeholder=\"Password\" />\n                  <label for=\"password\">\n                    <i class=\"bi bi-lock-fill me-2\"></i>Password\n                  </label>\n                </div>\n\n                <!-- Submit Button -->\n                <button type=\"submit\" class=\"btn btn-primary w-100 btn-lg mb-4\">\n                  <i class=\"bi bi-box-arrow-in-right me-2\"></i>Sign In\n                </button>\n\n                <!-- Alerts -->\n                <div v-if=\"error\" class=\"alert alert-danger mb-4\">\n                  <i class=\"bi bi-exclamation-circle-fill me-2\"></i>{{ error }}\n                </div>\n                <div v-if=\"success\" class=\"alert alert-success mb-4\">\n                  <i class=\"bi bi-check-circle-fill me-2\"></i>{{ success }}\n                </div>\n\n                <!-- Registration Link -->\n                <div class=\"text-center text-muted mt-4\">\n                  <p class=\"mb-0\">\n                    Don't have an account?\n                    <router-link to=\"/register\" class=\"text-primary fw-bold text-decoration-none\">\n                      Create one now\n                    </router-link>\n                  </p>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport axios from \"axios\";\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      error: \"\",\n      success: \"\",\n    }\n  },\n   methods: {\n    async login() {\n      // Clear old session before login\n      localStorage.removeItem(\"user\");\n      localStorage.removeItem(\"token\");\n      delete axios.defaults.headers.common[\"Authorization\"];\n\n      try {\n        const response = await axios.post(\"http://localhost:8080/auth/login\", {\n          email: this.email,\n          password: this.password,\n        });\n\n        const token = response.data.token;\n        const user = response.data.user || response.data; // adjust if user is nested\n\n        if (token) {\n          // Save session\n          localStorage.setItem(\"token\", token);\n          localStorage.setItem(\"user\", JSON.stringify(user));\n          axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n\n          this.success = \"Login successful!\";\n          this.error = \"\";\n\n          // Redirect after short delay\n          setTimeout(() => {\n            this.redirectUser(\"UserDashboard\"); // Change to your desired route name\n          }, 1000);\n        } else {\n          this.error = \"Login failed: token not received.\";\n          this.success = \"\";\n        }\n      } catch (err) {\n        this.error = \"Invalid credentials. Please try again.\";\n        this.success = \"\";\n        console.error(\"Login failed:\", err);\n      }\n    },\n    redirectUser(routeName) {\n      this.$router.replace({ name: routeName });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.login-header {\n  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);\n  border-radius: 0 0 2rem 2rem;\n}\n\n.card {\n  border-radius: 1.5rem;\n  margin-top: -4rem;\n}\n\n.form-control {\n  border-radius: 0.75rem;\n  padding: 1rem;\n  border: 1px solid #e5e7eb;\n}\n\n.form-control:focus {\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);\n  border-color: #3b82f6;\n}\n\n.btn-primary {\n  border-radius: 0.75rem;\n  padding: 1rem;\n  transition: all 0.3s ease;\n}\n\n.btn-primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 0.5rem 1rem rgba(59, 130, 246, 0.2);\n}\n\n.alert {\n  border-radius: 0.75rem;\n}\n\n.text-primary {\n  color: #3b82f6 !important;\n}\n\n@media (max-width: 768px) {\n  .card {\n    margin-top: -2rem;\n  }\n\n  .login-header {\n    border-radius: 0 0 1.5rem 1.5rem;\n  }\n}\n</style>\n"],"mappings":"AAmEA,OAAOA,KAAI,MAAO,OAAO;AACzB,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE;IACX;EACF,CAAC;EACAC,OAAO,EAAE;IACR,MAAMC,KAAKA,CAAA,EAAG;MACZ;MACAC,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;MAC/BD,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;MAChC,OAAOV,KAAK,CAACW,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;MAErD,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMd,KAAK,CAACe,IAAI,CAAC,kCAAkC,EAAE;UACpEZ,KAAK,EAAE,IAAI,CAACA,KAAK;UACjBC,QAAQ,EAAE,IAAI,CAACA;QACjB,CAAC,CAAC;QAEF,MAAMY,KAAI,GAAIF,QAAQ,CAACZ,IAAI,CAACc,KAAK;QACjC,MAAMC,IAAG,GAAIH,QAAQ,CAACZ,IAAI,CAACe,IAAG,IAAKH,QAAQ,CAACZ,IAAI,EAAE;;QAElD,IAAIc,KAAK,EAAE;UACT;UACAP,YAAY,CAACS,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;UACpCP,YAAY,CAACS,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC,CAAC;UAClDjB,KAAK,CAACW,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,UAAUG,KAAK,EAAE;UAElE,IAAI,CAACV,OAAM,GAAI,mBAAmB;UAClC,IAAI,CAACD,KAAI,GAAI,EAAE;;UAEf;UACAgB,UAAU,CAAC,MAAM;YACf,IAAI,CAACC,YAAY,CAAC,eAAe,CAAC,EAAE;UACtC,CAAC,EAAE,IAAI,CAAC;QACV,OAAO;UACL,IAAI,CAACjB,KAAI,GAAI,mCAAmC;UAChD,IAAI,CAACC,OAAM,GAAI,EAAE;QACnB;MACF,EAAE,OAAOiB,GAAG,EAAE;QACZ,IAAI,CAAClB,KAAI,GAAI,wCAAwC;QACrD,IAAI,CAACC,OAAM,GAAI,EAAE;QACjBkB,OAAO,CAACnB,KAAK,CAAC,eAAe,EAAEkB,GAAG,CAAC;MACrC;IACF,CAAC;IACDD,YAAYA,CAACG,SAAS,EAAE;MACtB,IAAI,CAACC,OAAO,CAACC,OAAO,CAAC;QAAE1B,IAAI,EAAEwB;MAAU,CAAC,CAAC;IAC3C;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}