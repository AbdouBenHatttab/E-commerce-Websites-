{"ast":null,"code":"import axios from 'axios';\nimport AuthService from '@/services/AuthService';\nconst API_URL = 'http://localhost:8080/cart';\nclass CartService {\n  getAuthHeaders() {\n    const token = AuthService.getToken();\n    console.log('Auth Token:', token); // Add this line for debugging\n    return token ? {\n      Authorization: `Bearer ${token}`\n    } : {};\n  }\n  getUserId() {\n    const user = AuthService.getUser();\n    if (!user || !user.id) {\n      console.error('CartService: User ID is missing', user);\n      return null;\n    }\n    return user.id;\n  }\n  async getCart() {\n    const userId = this.getUserId();\n    if (!userId) return Promise.reject('User ID is missing');\n    return axios.get(`${API_URL}?userId=${userId}`, {\n      headers: this.getAuthHeaders()\n    }).catch(error => {\n      console.error('Error fetching cart:', error);\n      throw error;\n    });\n  }\n  async addToCart(productId, quantity) {\n    const userId = this.getUserId();\n    if (!userId) return Promise.reject('User ID is missing');\n    return axios.post(API_URL, null, {\n      params: {\n        userId,\n        productId,\n        quantity\n      },\n      headers: this.getAuthHeaders()\n    }).catch(error => {\n      console.error('Error adding to cart:', error);\n      throw error;\n    });\n  }\n  async removeFromCart(productId) {\n    const userId = this.getUserId();\n    if (!userId) return Promise.reject('User ID is missing');\n    return axios.delete(`${API_URL}/remove`, {\n      params: {\n        userId,\n        productId\n      },\n      headers: this.getAuthHeaders()\n    }).catch(error => {\n      console.error('Error removing from cart:', error);\n      throw error;\n    });\n  }\n  async updateQuantity(productId, quantity) {\n    const userId = this.getUserId();\n    if (!userId) return Promise.reject('User ID is missing');\n    return axios.put(API_URL, null, {\n      params: {\n        userId,\n        productId,\n        quantity\n      },\n      headers: this.getAuthHeaders()\n    }).catch(error => {\n      console.error('Error updating cart quantity:', error);\n      throw error;\n    });\n  }\n}\nexport default new CartService();","map":{"version":3,"names":["axios","AuthService","API_URL","CartService","getAuthHeaders","token","getToken","console","log","Authorization","getUserId","user","getUser","id","error","getCart","userId","Promise","reject","get","headers","catch","addToCart","productId","quantity","post","params","removeFromCart","delete","updateQuantity","put"],"sources":["C:/Users/Hedib/OneDrive/Bureau/hello-word-vue/src/services/CartService.js"],"sourcesContent":["import axios from 'axios';\nimport AuthService from '@/services/AuthService';\n\nconst API_URL = 'http://localhost:8080/cart';\n\nclass CartService {\n  getAuthHeaders() {\n    const token = AuthService.getToken();\n    console.log('Auth Token:', token); // Add this line for debugging\n    return token ? { Authorization: `Bearer ${token}` } : {};\n  }\n\n  getUserId() {\n    const user = AuthService.getUser();\n    if (!user || !user.id) {\n      console.error('CartService: User ID is missing', user);\n      return null;\n    }\n    return user.id;\n  }\n\n  async getCart() {\n    const userId = this.getUserId();\n    if (!userId) return Promise.reject('User ID is missing');\n\n    return axios\n      .get(`${API_URL}?userId=${userId}`, {\n        headers: this.getAuthHeaders(),\n      })\n      .catch((error) => {\n        console.error('Error fetching cart:', error);\n        throw error;\n      });\n  }\n\n  async addToCart(productId, quantity) {\n    const userId = this.getUserId();\n    if (!userId) return Promise.reject('User ID is missing');\n\n    return axios\n      .post(API_URL, null, {\n        params: { userId, productId, quantity },\n        headers: this.getAuthHeaders(),\n      })\n      .catch((error) => {\n        console.error('Error adding to cart:', error);\n        throw error;\n      });\n  }\n\n  async removeFromCart(productId) {\n    const userId = this.getUserId();\n    if (!userId) return Promise.reject('User ID is missing');\n\n    return axios\n      .delete(`${API_URL}/remove`, {\n        params: { userId, productId },\n        headers: this.getAuthHeaders(),\n      })\n      .catch((error) => {\n        console.error('Error removing from cart:', error);\n        throw error;\n      });\n  }\n\n  async updateQuantity(productId, quantity) {\n    const userId = this.getUserId();\n    if (!userId) return Promise.reject('User ID is missing');\n\n    return axios\n      .put(API_URL, null, {\n        params: { userId, productId, quantity },\n        headers: this.getAuthHeaders(),\n      })\n      .catch((error) => {\n        console.error('Error updating cart quantity:', error);\n        throw error;\n      });\n  }\n}\n\nexport default new CartService();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}