{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport { createRouter, createWebHistory } from 'vue-router';\nimport Home from '@/views/Home.vue';\nimport Login from '@/views/Login.vue';\nimport Register from '@/components/RegisterPage.vue';\n// Admin pages\nimport AdminDashboard from '@/views/admin/AdminDashboard.vue';\nimport AdminProfile from '@/components/admin/AdminProfile.vue';\nimport AdminUsers from '@/components/admin/AdminUsers.vue';\nimport AdminProducts from '@/components/admin/AdminProducts.vue';\n// User pages\nimport UserDashboard from '@/components/user/UserDashboard.vue';\nimport UserProfile from '@/components/user/UserProfile.vue';\nimport ProductList from '@/components/user/ProductList.vue';\nimport UserCart from '@//user/UserCart.vue';\nimport AuthService from '@/services/AuthService';\nconst routes = [{\n  path: '/',\n  name: 'Home',\n  component: Home\n}, {\n  path: '/login',\n  name: 'Login',\n  component: Login\n}, {\n  path: '/register',\n  name: 'Register',\n  component: Register\n},\n// Admin routes\n{\n  path: '/admin/dashboard',\n  name: 'AdminDashboard',\n  component: AdminDashboard,\n  meta: {\n    requiresAuth: true,\n    requiresAdmin: true\n  }\n}, {\n  path: '/admin/profile',\n  name: 'AdminProfile',\n  component: AdminProfile,\n  meta: {\n    requiresAuth: true,\n    role: 'ROLE_ADMIN'\n  }\n}, {\n  path: '/admin/users',\n  name: 'AdminUsers',\n  component: AdminUsers,\n  meta: {\n    requiresAuth: true,\n    role: 'ROLE_ADMIN'\n  }\n}, {\n  path: '/admin/products',\n  name: 'AdminProducts',\n  component: AdminProducts,\n  meta: {\n    requiresAuth: true,\n    role: 'ROLE_ADMIN'\n  }\n},\n// User routes\n{\n  path: '/user/dashboard',\n  name: 'UserDashboard',\n  component: UserDashboard,\n  meta: {\n    requiresAuth: true,\n    role: 'ROLE_USER'\n  }\n}, {\n  path: '/user/profile',\n  name: 'UserProfile',\n  component: UserProfile,\n  meta: {\n    requiresAuth: true,\n    role: 'ROLE_USER'\n  }\n}, {\n  path: '/user/products',\n  name: 'ProductList',\n  component: ProductList,\n  meta: {\n    requiresAuth: true,\n    role: 'ROLE_USER'\n  }\n}, {\n  path: '/user/cart',\n  name: 'UserCart',\n  component: UserCart,\n  meta: {\n    requiresAuth: true,\n    requiresUser: true\n  }\n}];\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  const user = AuthService.getUser();\n  const isAuthenticated = !!user;\n  const isAdmin = user && user.role === 'ROLE_ADMIN';\n  const isUser = user && user.role === 'ROLE_USER';\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!isAuthenticated) {\n      return next({\n        name: 'Login'\n      });\n    }\n    if (to.matched.some(record => record.meta.requiresAdmin) && !isAdmin) {\n      return next({\n        name: 'Home'\n      });\n    }\n    if (to.matched.some(record => record.meta.requiresUser) && !isUser) {\n      return next({\n        name: 'Home'\n      });\n    }\n  }\n  next();\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","Home","Login","Register","AdminDashboard","AdminProfile","AdminUsers","AdminProducts","UserDashboard","UserProfile","ProductList","UserCart","AuthService","routes","path","name","component","meta","requiresAuth","requiresAdmin","role","requiresUser","router","history","process","env","BASE_URL","beforeEach","to","from","next","user","getUser","isAuthenticated","isAdmin","isUser","matched","some","record"],"sources":["C:/Users/Hedib/OneDrive/Bureau/hello-word-vue/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router';\nimport Home from '@/views/Home.vue';\nimport Login from '@/views/Login.vue';\nimport Register from '@/components/RegisterPage.vue';\n// Admin pages\nimport AdminDashboard from '@/views/admin/AdminDashboard.vue';\nimport AdminProfile from '@/components/admin/AdminProfile.vue';\nimport AdminUsers from '@/components/admin/AdminUsers.vue';\nimport AdminProducts from '@/components/admin/AdminProducts.vue';\n// User pages\nimport UserDashboard from '@/components/user/UserDashboard.vue';\nimport UserProfile from '@/components/user/UserProfile.vue';\nimport ProductList from '@/components/user/ProductList.vue';\nimport UserCart from '@//user/UserCart.vue';\nimport AuthService from '@/services/AuthService';\n\nconst routes = [\n  { path: '/', name: 'Home', component: Home },\n  { path: '/login', name: 'Login', component: Login },\n  { path: '/register', name: 'Register', component: Register },\n  // Admin routes\n  {\n    path: '/admin/dashboard',\n    name: 'AdminDashboard',\n    component: AdminDashboard,\n    meta: { requiresAuth: true, requiresAdmin: true },\n  },\n  {\n    path: '/admin/profile',\n    name: 'AdminProfile',\n    component: AdminProfile,\n    meta: { requiresAuth: true, role: 'ROLE_ADMIN' },\n  },\n  {\n    path: '/admin/users',\n    name: 'AdminUsers',\n    component: AdminUsers,\n    meta: { requiresAuth: true, role: 'ROLE_ADMIN' },\n  },\n  {\n    path: '/admin/products',\n    name: 'AdminProducts',\n    component: AdminProducts,\n    meta: { requiresAuth: true, role: 'ROLE_ADMIN' },\n  },\n  // User routes\n  {\n    path: '/user/dashboard',\n    name: 'UserDashboard',\n    component: UserDashboard,\n    meta: { requiresAuth: true, role: 'ROLE_USER' },\n  },\n  {\n    path: '/user/profile',\n    name: 'UserProfile',\n    component: UserProfile,\n    meta: { requiresAuth: true, role: 'ROLE_USER' },\n  },\n  {\n    path: '/user/products',\n    name: 'ProductList',\n    component: ProductList,\n    meta: { requiresAuth: true, role: 'ROLE_USER' },\n  },\n  {\n    path: '/user/cart',\n    name: 'UserCart',\n    component: UserCart,\n    meta: { requiresAuth: true, requiresUser: true },\n  },\n];\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n});\n\nrouter.beforeEach((to, from, next) => {\n  const user = AuthService.getUser();\n  const isAuthenticated = !!user;\n  const isAdmin = user && user.role === 'ROLE_ADMIN';\n  const isUser = user && user.role === 'ROLE_USER';\n\n  if (to.matched.some((record) => record.meta.requiresAuth)) {\n    if (!isAuthenticated) {\n      return next({ name: 'Login' });\n    }\n    if (to.matched.some((record) => record.meta.requiresAdmin) && !isAdmin) {\n      return next({ name: 'Home' });\n    }\n    if (to.matched.some((record) => record.meta.requiresUser) && !isUser) {\n      return next({ name: 'Home' });\n    }\n  }\n  next();\n});\n\nexport default router;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}