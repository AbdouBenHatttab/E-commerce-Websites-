{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"contact-messages-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"alert alert-info\"\n};\nconst _hoisted_3 = {\n  class: \"card-body\"\n};\nconst _hoisted_4 = {\n  class: \"card-title\"\n};\nconst _hoisted_5 = {\n  class: \"card-subtitle mb-2 text-muted\"\n};\nconst _hoisted_6 = {\n  class: \"card-text\"\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = {\n  key: 2,\n  class: \"modal fade show\",\n  tabindex: \"-1\",\n  \"aria-labelledby\": \"editModalLabel\",\n  style: {\n    \"display\": \"block\"\n  }\n};\nconst _hoisted_10 = {\n  class: \"modal-dialog\"\n};\nconst _hoisted_11 = {\n  class: \"modal-content\"\n};\nconst _hoisted_12 = {\n  class: \"modal-header\"\n};\nconst _hoisted_13 = {\n  class: \"modal-body\"\n};\nconst _hoisted_14 = {\n  class: \"form-floating mb-4\"\n};\nconst _hoisted_15 = {\n  class: \"form-floating mb-4\"\n};\nconst _hoisted_16 = {\n  class: \"form-floating mb-4\"\n};\nconst _hoisted_17 = {\n  class: \"modal-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[10] || (_cache[10] = _createElementVNode(\"h2\", {\n    class: \"text-center mb-4\"\n  }, \"Contact Us Messages\", -1 /* HOISTED */)), $data.messages.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \" No messages available. \")) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Messages List \"), _createElementVNode(\"div\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, message => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: message.id,\n      class: \"card mb-3\"\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h5\", _hoisted_4, _toDisplayString(message.name), 1 /* TEXT */), _createElementVNode(\"h6\", _hoisted_5, _toDisplayString(message.email), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_6, _toDisplayString(message.message), 1 /* TEXT */), _createCommentVNode(\" Edit and Delete Buttons for Admin \"), $options.isAdmin ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => $options.editMessage(message),\n      class: \"btn btn-warning btn-sm me-2\"\n    }, \" Edit \", 8 /* PROPS */, _hoisted_7)) : _createCommentVNode(\"v-if\", true), $options.isAdmin ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      onClick: $event => $options.deleteMessage(message.id),\n      class: \"btn btn-danger btn-sm\"\n    }, \" Delete \", 8 /* PROPS */, _hoisted_8)) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */))])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)), _createCommentVNode(\" Edit Message Modal \"), $data.editingMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_cache[6] || (_cache[6] = _createElementVNode(\"h5\", {\n    class: \"modal-title\",\n    id: \"editModalLabel\"\n  }, \"Edit Message\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn-close\",\n    \"data-bs-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    onClick: _cache[0] || (_cache[0] = $event => $data.editingMessage = null)\n  })]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"name\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.editingMessage.name = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.editingMessage.name]]), _cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"name\"\n  }, \"Name\", -1 /* HOISTED */))]), _createElementVNode(\"div\", _hoisted_15, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    class: \"form-control\",\n    id: \"email\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.editingMessage.email = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.editingMessage.email]]), _cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    for: \"email\"\n  }, \"Email\", -1 /* HOISTED */))]), _createElementVNode(\"div\", _hoisted_16, [_withDirectives(_createElementVNode(\"textarea\", {\n    class: \"form-control\",\n    id: \"message\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.editingMessage.message = $event),\n    rows: \"3\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.editingMessage.message]]), _cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    for: \"message\"\n  }, \"Message\", -1 /* HOISTED */))])]), _createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-secondary\",\n    onClick: _cache[4] || (_cache[4] = $event => $data.editingMessage = null)\n  }, \"Close\"), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-primary\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.saveMessage && $options.saveMessage(...args))\n  }, \"Save changes\")])])])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","tabindex","style","_createElementBlock","_hoisted_1","_createElementVNode","$data","messages","length","_hoisted_2","_Fragment","_createCommentVNode","_renderList","message","id","_hoisted_3","_hoisted_4","_toDisplayString","name","_hoisted_5","email","_hoisted_6","$options","isAdmin","onClick","$event","editMessage","_hoisted_7","deleteMessage","_hoisted_8","editingMessage","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","type","_cache","_hoisted_13","_hoisted_14","for","_hoisted_15","_hoisted_16","rows","_hoisted_17","args","saveMessage"],"sources":["C:\\Users\\Hedib\\OneDrive\\Bureau\\hello-word-vue\\src\\components\\admin\\ContactMessages.vue"],"sourcesContent":["<template>\r\n  <div class=\"contact-messages-container\">\r\n    <h2 class=\"text-center mb-4\">Contact Us Messages</h2>\r\n    <div v-if=\"messages.length === 0\" class=\"alert alert-info\">\r\n      No messages available.\r\n    </div>\r\n\r\n    <!-- Messages List -->\r\n    <div v-else>\r\n      <div v-for=\"message in messages\" :key=\"message.id\" class=\"card mb-3\">\r\n        <div class=\"card-body\">\r\n          <h5 class=\"card-title\">{{ message.name }}</h5>\r\n          <h6 class=\"card-subtitle mb-2 text-muted\">{{ message.email }}</h6>\r\n          <p class=\"card-text\">{{ message.message }}</p>\r\n\r\n          <!-- Edit and Delete Buttons for Admin -->\r\n          <button \r\n            v-if=\"isAdmin\" \r\n            @click=\"editMessage(message)\" \r\n            class=\"btn btn-warning btn-sm me-2\"\r\n          >\r\n            Edit\r\n          </button>\r\n          <button \r\n            v-if=\"isAdmin\" \r\n            @click=\"deleteMessage(message.id)\" \r\n            class=\"btn btn-danger btn-sm\"\r\n          >\r\n            Delete\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Edit Message Modal -->\r\n    <div v-if=\"editingMessage\" class=\"modal fade show\" tabindex=\"-1\" aria-labelledby=\"editModalLabel\" style=\"display: block;\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"editModalLabel\">Edit Message</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"editingMessage = null\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"form-floating mb-4\">\r\n              <input type=\"text\" class=\"form-control\" id=\"name\" v-model=\"editingMessage.name\" />\r\n              <label for=\"name\">Name</label>\r\n            </div>\r\n            <div class=\"form-floating mb-4\">\r\n              <input type=\"email\" class=\"form-control\" id=\"email\" v-model=\"editingMessage.email\" />\r\n              <label for=\"email\">Email</label>\r\n            </div>\r\n            <div class=\"form-floating mb-4\">\r\n              <textarea class=\"form-control\" id=\"message\" v-model=\"editingMessage.message\" rows=\"3\"></textarea>\r\n              <label for=\"message\">Message</label>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"editingMessage = null\">Close</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"saveMessage\">Save changes</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ContactService from '@/services/ContactService';\r\n\r\nexport default {\r\n  name: 'ContactMessages',\r\n  data() {\r\n    return {\r\n      messages: [],\r\n      editingMessage: null,\r\n    };\r\n  },\r\n  computed: {\r\n    isAdmin() {\r\n      return this.$store.state.user?.role === 'ROLE_ADMIN'; // Check if the user is an admin\r\n    }\r\n  },\r\n  async created() {\r\n    try {\r\n      this.messages = await ContactService.getAllMessages();\r\n    } catch (error) {\r\n      console.error('Error fetching contact messages:', error);\r\n    }\r\n  },\r\n  methods: {\r\n    async deleteMessage(id) {\r\n      try {\r\n        await ContactService.deleteMessage(id);\r\n        this.messages = this.messages.filter((message) => message.id !== id);\r\n      } catch (error) {\r\n        console.error('Error deleting message:', error);\r\n      }\r\n    },\r\n    editMessage(message) {\r\n      this.editingMessage = { ...message }; // Create a copy of the message to edit\r\n    },\r\n    async saveMessage() {\r\n      try {\r\n        await ContactService.updateMessage(this.editingMessage.id, this.editingMessage);\r\n        const index = this.messages.findIndex((msg) => msg.id === this.editingMessage.id);\r\n        if (index !== -1) {\r\n          this.messages[index] = this.editingMessage;\r\n        }\r\n        this.editingMessage = null;\r\n      } catch (error) {\r\n        console.error('Error updating message:', error);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Add styles for the CRUD operations */\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}