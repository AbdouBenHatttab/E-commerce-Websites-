{"ast":null,"code":"import AuthService from '@/services/AuthService';\nimport UserService from '@/services/UserService';\nimport { toast } from 'vue3-toastify';\nimport 'vue3-toastify/dist/index.css';\nexport default {\n  name: 'AdminProfile',\n  data() {\n    return {\n      user: null,\n      userForm: {\n        name: '',\n        email: '',\n        phoneNumber: '',\n        address: '',\n        imageUrl: ''\n      },\n      isModalVisible: false,\n      loading: false,\n      error: '',\n      success: '',\n      defaultImage: 'https://via.placeholder.com/150'\n    };\n  },\n  async mounted() {\n    await this.fetchAdminProfile();\n  },\n  methods: {\n    async fetchAdminProfile() {\n      try {\n        this.user = AuthService.getCurrentUser();\n        if (this.user) {\n          this.userForm = {\n            ...this.user\n          };\n        }\n      } catch (error) {\n        console.error('Error fetching admin profile:', error);\n        toast.error('Failed to load profile data');\n      }\n    },\n    showModal() {\n      this.isModalVisible = true;\n    },\n    closeModal() {\n      this.isModalVisible = false;\n    },\n    async updateProfile() {\n      this.loading = true;\n      this.error = '';\n      this.success = '';\n      try {\n        const response = await UserService.updateProfile(this.userForm);\n        this.success = 'Profile updated successfully!';\n        console.log('Profile updated:', response.data);\n        this.user = {\n          ...this.userForm\n        };\n        AuthService.setUser(response.data); // Update the user in AuthService\n        this.closeModal();\n        toast.success('Profile updated successfully!');\n      } catch (error) {\n        console.error('Error updating profile:', error);\n        this.error = 'Failed to update profile.';\n        toast.error('Failed to update profile.');\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["AuthService","UserService","toast","name","data","user","userForm","email","phoneNumber","address","imageUrl","isModalVisible","loading","error","success","defaultImage","mounted","fetchAdminProfile","methods","getCurrentUser","console","showModal","closeModal","updateProfile","response","log","setUser"],"sources":["C:\\Users\\Hedib\\OneDrive\\Bureau\\hello-word-vue\\src\\components\\admin\\AdminProfile.vue"],"sourcesContent":["<template>\n  <div class=\"container py-5\">\n    <!-- Profile Header -->\n    <div class=\"profile-header bg-primary-gradient\">\n      <div class=\"container py-5\">\n        <h1 class=\"text-center text-white display-5 fw-bold mb-4\">\n          Admin Profile\n        </h1>\n      </div>\n    </div>\n\n    <!-- Profile Content -->\n    <div class=\"container py-5\">\n      <div class=\"row g-5 justify-content-center\">\n        <!-- Profile Card -->\n        <div class=\"col-xl-4 col-lg-5\">\n          <div class=\"card profile-card shadow-lg border-0\">\n            <div class=\"card-body p-4\">\n              <div class=\"d-flex flex-column align-items-center\">\n                <div class=\"profile-avatar-wrapper mb-4\">\n                  <div class=\"profile-avatar bg-primary-soft\">\n                    <img\n                      v-if=\"user.imageUrl\"\n                      :src=\"user.imageUrl\"\n                      class=\"img-fluid\"\n                      alt=\"Profile\"\n                    />\n                    <svg\n                      v-else\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"64\"\n                      height=\"64\"\n                      fill=\"currentColor\"\n                      class=\"bi bi-person-circle text-primary\"\n                      viewBox=\"0 0 16 16\"\n                    >\n                      <path d=\"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z\" />\n                      <path\n                        fill-rule=\"evenodd\"\n                        d=\"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z\"\n                      />\n                    </svg>\n                  </div>\n                </div>\n                <h2 class=\"h3 mb-2\">{{ user.name }}</h2>\n                <div class=\"d-flex gap-2 mb-4\">\n                  <span class=\"badge bg-primary-soft text-primary\">{{\n                    user.role\n                  }}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Details Card -->\n        <div class=\"col-xl-8 col-lg-7\">\n          <div class=\"card details-card shadow-lg border-0\">\n            <div class=\"card-body p-4\">\n              <div\n                class=\"d-flex justify-content-between align-items-center mb-4\"\n              >\n                <h3 class=\"h4 mb-0\">Personal Information</h3>\n                <router-link\n                  to=\"/admin/dashboard\"\n                  class=\"btn btn-outline-primary\"\n                >\n                  <i class=\"bi bi-arrow-left-circle me-2\"></i>Back to Dashboard\n                </router-link>\n              </div>\n\n              <div class=\"row g-4\">\n                <div class=\"col-md-6\">\n                  <div class=\"detail-item\">\n                    <i class=\"bi bi-envelope-fill text-primary\"></i>\n                    <div>\n                      <h6 class=\"mb-1\">Email Address</h6>\n                      <p class=\"mb-0 text-muted\">{{ user.email }}</p>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"col-md-6\">\n                  <div class=\"detail-item\">\n                    <i class=\"bi bi-person-badge-fill text-primary\"></i>\n                    <div>\n                      <h6 class=\"mb-1\">User Role</h6>\n                      <p class=\"mb-0 text-muted\">{{ user.role }}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"d-flex justify-content-end mt-4\">\n                <button class=\"btn btn-primary\" @click=\"showModal\">Edit Profile</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Edit Profile Modal -->\n    <div v-if=\"isModalVisible\" class=\"modal show d-block\" tabindex=\"-1\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content rounded-4 shadow\">\n          <div class=\"modal-header border-bottom-0\">\n            <h3 class=\"modal-title\">\n              <i class=\"bi bi-person-gear me-2\"></i>Edit Profile\n            </h3>\n            <button\n              type=\"button\"\n              class=\"btn-close\"\n              @click=\"closeModal\"\n              aria-label=\"Close\"\n            ></button>\n          </div>\n          <div class=\"modal-body\">\n            <form @submit.prevent=\"updateProfile\">\n              <div class=\"row g-4\">\n                <!-- Image Preview -->\n                <div class=\"col-md-6 text-center\">\n                  <div class=\"border rounded-4 p-3 shadow-sm bg-light\">\n                    <img\n                      :src=\"userForm.imageUrl || defaultImage\"\n                      class=\"img-fluid rounded-3 mb-3\"\n                      alt=\"Preview\"\n                      style=\"max-height: 250px; object-fit: cover\"\n                    />\n                    <div class=\"form-text\">Live Image Preview</div>\n                  </div>\n                </div>\n\n                <!-- Form Fields -->\n                <div class=\"col-md-6\">\n                  <div class=\"mb-3\">\n                    <label for=\"name\" class=\"form-label\">Name</label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"name\"\n                      v-model=\"userForm.name\"\n                      required\n                    />\n                  </div>\n                  <div class=\"mb-3\">\n                    <label for=\"email\" class=\"form-label\">Email</label>\n                    <input\n                      type=\"email\"\n                      class=\"form-control\"\n                      id=\"email\"\n                      v-model=\"userForm.email\"\n                      required\n                    />\n                  </div>\n                  <div class=\"mb-3\">\n                    <label for=\"phoneNumber\" class=\"form-label\">Phone Number</label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"phoneNumber\"\n                      v-model=\"userForm.phoneNumber\"\n                    />\n                  </div>\n                  <div class=\"mb-3\">\n                    <label for=\"address\" class=\"form-label\">Address</label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"address\"\n                      v-model=\"userForm.address\"\n                    />\n                  </div>\n                  <div class=\"mb-3\">\n                    <label for=\"imageUrl\" class=\"form-label\">Image URL</label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"imageUrl\"\n                      v-model=\"userForm.imageUrl\"\n                    />\n                  </div>\n                </div>\n              </div>\n              <div class=\"modal-footer border-top-0\">\n                <button type=\"submit\" class=\"btn btn-primary\">Save</button>\n                <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeModal\">Cancel</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"modal-backdrop fade\"\n      :class=\"{ show: isModalVisible }\"\n      @click=\"closeModal\"\n      :style=\"isModalVisible ? 'display: block;' : 'display: none;'\"\n    ></div>\n  </div>\n</template>\n\n<script>\nimport AuthService from '@/services/AuthService';\nimport UserService from '@/services/UserService';\nimport { toast } from 'vue3-toastify';\nimport 'vue3-toastify/dist/index.css';\n\nexport default {\n  name: 'AdminProfile',\n  data() {\n    return {\n      user: null,\n      userForm: {\n        name: '',\n        email: '',\n        phoneNumber: '',\n        address: '',\n        imageUrl: '',\n      },\n      isModalVisible: false,\n      loading: false,\n      error: '',\n      success: '',\n      defaultImage: 'https://via.placeholder.com/150',\n    };\n  },\n  async mounted() {\n    await this.fetchAdminProfile();\n  },\n  methods: {\n    async fetchAdminProfile() {\n      try {\n        this.user = AuthService.getCurrentUser();\n        if (this.user) {\n          this.userForm = { ...this.user };\n        }\n      } catch (error) {\n        console.error('Error fetching admin profile:', error);\n        toast.error('Failed to load profile data');\n      }\n    },\n    showModal() {\n      this.isModalVisible = true;\n    },\n    closeModal() {\n      this.isModalVisible = false;\n    },\n    async updateProfile() {\n      this.loading = true;\n      this.error = '';\n      this.success = '';\n      try {\n        const response = await UserService.updateProfile(this.userForm);\n        this.success = 'Profile updated successfully!';\n        console.log('Profile updated:', response.data);\n        this.user = { ...this.userForm };\n        AuthService.setUser(response.data); // Update the user in AuthService\n        this.closeModal();\n        toast.success('Profile updated successfully!');\n      } catch (error) {\n        console.error('Error updating profile:', error);\n        this.error = 'Failed to update profile.';\n        toast.error('Failed to update profile.');\n      } finally {\n        this.loading = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.profile-header {\n  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);\n  border-radius: 0 0 2rem 2rem;\n}\n\n.profile-card {\n  margin-top: -6rem;\n  border-radius: 1.5rem;\n  overflow: hidden;\n}\n\n.profile-avatar-wrapper {\n  margin-top: -4rem;\n}\n\n.profile-avatar {\n  width: 8rem;\n  height: 8rem;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(59, 130, 246, 0.1);\n  border: 3px solid #3b82f6;\n  overflow: hidden;\n}\n\n.details-card {\n  border-radius: 1.5rem;\n}\n\n.detail-item {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n  padding: 1.25rem;\n  background: rgba(243, 244, 246, 0.3);\n  border-radius: 1rem;\n}\n\n.detail-item i {\n  font-size: 1.5rem;\n  flex-shrink: 0;\n}\n\n.bg-primary-soft {\n  background-color: rgba(13, 110, 253, 0.1);\n}\n\n@media (max-width: 768px) {\n  .profile-card {\n    margin-top: -4rem;\n  }\n\n  .profile-avatar {\n    width: 6rem;\n    height: 6rem;\n  }\n}\n</style>\n"],"mappings":"AA2MA,OAAOA,WAAU,MAAO,wBAAwB;AAChD,OAAOC,WAAU,MAAO,wBAAwB;AAChD,SAASC,KAAI,QAAS,eAAe;AACrC,OAAO,8BAA8B;AAErC,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,IAAI;MACVC,QAAQ,EAAE;QACRH,IAAI,EAAE,EAAE;QACRI,KAAK,EAAE,EAAE;QACTC,WAAW,EAAE,EAAE;QACfC,OAAO,EAAE,EAAE;QACXC,QAAQ,EAAE;MACZ,CAAC;MACDC,cAAc,EAAE,KAAK;MACrBC,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,EAAE;MACXC,YAAY,EAAE;IAChB,CAAC;EACH,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAACC,iBAAiB,CAAC,CAAC;EAChC,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,iBAAiBA,CAAA,EAAG;MACxB,IAAI;QACF,IAAI,CAACZ,IAAG,GAAIL,WAAW,CAACmB,cAAc,CAAC,CAAC;QACxC,IAAI,IAAI,CAACd,IAAI,EAAE;UACb,IAAI,CAACC,QAAO,GAAI;YAAE,GAAG,IAAI,CAACD;UAAK,CAAC;QAClC;MACF,EAAE,OAAOQ,KAAK,EAAE;QACdO,OAAO,CAACP,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;QACrDX,KAAK,CAACW,KAAK,CAAC,6BAA6B,CAAC;MAC5C;IACF,CAAC;IACDQ,SAASA,CAAA,EAAG;MACV,IAAI,CAACV,cAAa,GAAI,IAAI;IAC5B,CAAC;IACDW,UAAUA,CAAA,EAAG;MACX,IAAI,CAACX,cAAa,GAAI,KAAK;IAC7B,CAAC;IACD,MAAMY,aAAaA,CAAA,EAAG;MACpB,IAAI,CAACX,OAAM,GAAI,IAAI;MACnB,IAAI,CAACC,KAAI,GAAI,EAAE;MACf,IAAI,CAACC,OAAM,GAAI,EAAE;MACjB,IAAI;QACF,MAAMU,QAAO,GAAI,MAAMvB,WAAW,CAACsB,aAAa,CAAC,IAAI,CAACjB,QAAQ,CAAC;QAC/D,IAAI,CAACQ,OAAM,GAAI,+BAA+B;QAC9CM,OAAO,CAACK,GAAG,CAAC,kBAAkB,EAAED,QAAQ,CAACpB,IAAI,CAAC;QAC9C,IAAI,CAACC,IAAG,GAAI;UAAE,GAAG,IAAI,CAACC;QAAS,CAAC;QAChCN,WAAW,CAAC0B,OAAO,CAACF,QAAQ,CAACpB,IAAI,CAAC,EAAE;QACpC,IAAI,CAACkB,UAAU,CAAC,CAAC;QACjBpB,KAAK,CAACY,OAAO,CAAC,+BAA+B,CAAC;MAChD,EAAE,OAAOD,KAAK,EAAE;QACdO,OAAO,CAACP,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/C,IAAI,CAACA,KAAI,GAAI,2BAA2B;QACxCX,KAAK,CAACW,KAAK,CAAC,2BAA2B,CAAC;MAC1C,UAAU;QACR,IAAI,CAACD,OAAM,GAAI,KAAK;MACtB;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}