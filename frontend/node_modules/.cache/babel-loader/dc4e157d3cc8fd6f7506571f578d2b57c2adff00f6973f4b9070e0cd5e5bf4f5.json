{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nconst _hoisted_2 = {\n  class: \"container py-5\"\n};\nconst _hoisted_3 = {\n  class: \"row justify-content-center\"\n};\nconst _hoisted_4 = {\n  class: \"col-md-8 col-lg-6\"\n};\nconst _hoisted_5 = {\n  class: \"card shadow-lg border-0\"\n};\nconst _hoisted_6 = {\n  class: \"card-body p-4 p-md-5\"\n};\nconst _hoisted_7 = {\n  class: \"form-floating mb-4\"\n};\nconst _hoisted_8 = {\n  class: \"form-floating mb-4\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"alert alert-danger mb-4\"\n};\nconst _hoisted_10 = {\n  key: 1,\n  class: \"alert alert-success mb-4\"\n};\nconst _hoisted_11 = {\n  class: \"text-center text-muted mt-4\"\n};\nconst _hoisted_12 = {\n  class: \"mb-0\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Gradient Header \"), _cache[10] || (_cache[10] = _createElementVNode(\"div\", {\n    class: \"login-header bg-primary-gradient\"\n  }, [_createElementVNode(\"div\", {\n    class: \"container py-5\"\n  }, [_createElementVNode(\"h1\", {\n    class: \"text-center text-white display-5 fw-bold\"\n  }, \"Welcome Back\")])], -1 /* HOISTED */)), _createCommentVNode(\" Login Card \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.login && $options.login(...args), [\"prevent\"]))\n  }, [_createCommentVNode(\" Email Input \"), _createElementVNode(\"div\", _hoisted_7, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event),\n    required: \"\",\n    autocomplete: \"email\",\n    placeholder: \"name@example.com\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.email]]), _cache[3] || (_cache[3] = _createElementVNode(\"label\", {\n    for: \"email\"\n  }, [_createElementVNode(\"i\", {\n    class: \"bi bi-envelope-fill me-2\"\n  }), _createTextVNode(\"Email address \")], -1 /* HOISTED */))]), _createCommentVNode(\" Password Input \"), _createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    class: \"form-control\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event),\n    required: \"\",\n    autocomplete: \"current-password\",\n    placeholder: \"Password\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.password]]), _cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    for: \"password\"\n  }, [_createElementVNode(\"i\", {\n    class: \"bi bi-lock-fill me-2\"\n  }), _createTextVNode(\"Password \")], -1 /* HOISTED */))]), _createCommentVNode(\" Submit Button \"), _cache[9] || (_cache[9] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary w-100 btn-lg mb-4\"\n  }, [_createElementVNode(\"i\", {\n    class: \"bi bi-box-arrow-in-right me-2\"\n  }), _createTextVNode(\"Sign In \")], -1 /* HOISTED */)), _createCommentVNode(\" Alerts \"), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_cache[5] || (_cache[5] = _createElementVNode(\"i\", {\n    class: \"bi bi-exclamation-circle-fill me-2\"\n  }, null, -1 /* HOISTED */)), _createTextVNode(_toDisplayString($data.error), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), $data.success ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_cache[6] || (_cache[6] = _createElementVNode(\"i\", {\n    class: \"bi bi-check-circle-fill me-2\"\n  }, null, -1 /* HOISTED */)), _createTextVNode(_toDisplayString($data.success), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Registration Link \"), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"p\", _hoisted_12, [_cache[8] || (_cache[8] = _createTextVNode(\" Don't have an account? \")), _createVNode(_component_router_link, {\n    to: \"/register\",\n    class: \"text-primary fw-bold text-decoration-none\"\n  }, {\n    default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\" Create one now \")])),\n    _: 1 /* STABLE */\n  })])])], 32 /* NEED_HYDRATION */)])])])])])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","onSubmit","_cache","_withModifiers","args","$options","login","_hoisted_7","type","id","$event","$data","email","required","autocomplete","placeholder","for","_createTextVNode","_hoisted_8","password","error","_hoisted_9","_toDisplayString","success","_hoisted_10","_hoisted_11","_hoisted_12","_createVNode","_component_router_link","to","default","_withCtx","_"],"sources":["C:\\projet stage 2\\final\\hello-word-vue\\src\\components\\LoginPage.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <!-- Gradient Header -->\n    <div class=\"login-header bg-primary-gradient\">\n      <div class=\"container py-5\">\n        <h1 class=\"text-center text-white display-5 fw-bold\">Welcome Back</h1>\n      </div>\n    </div>\n\n    <!-- Login Card -->\n    <div class=\"container py-5\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-8 col-lg-6\">\n          <div class=\"card shadow-lg border-0\">\n            <div class=\"card-body p-4 p-md-5\">\n              <form @submit.prevent=\"login\">\n                <!-- Email Input -->\n                <div class=\"form-floating mb-4\">\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"email\"\n                    v-model=\"email\"\n                    required\n                    autocomplete=\"email\"\n                    placeholder=\"name@example.com\"\n                  />\n                  <label for=\"email\">\n                    <i class=\"bi bi-envelope-fill me-2\"></i>Email address\n                  </label>\n                </div>\n\n                <!-- Password Input -->\n                <div class=\"form-floating mb-4\">\n                  <input\n                    type=\"password\"\n                    class=\"form-control\"\n                    id=\"password\"\n                    v-model=\"password\"\n                    required\n                    autocomplete=\"current-password\"\n                    placeholder=\"Password\"\n                  />\n                  <label for=\"password\">\n                    <i class=\"bi bi-lock-fill me-2\"></i>Password\n                  </label>\n                </div>\n\n                <!-- Submit Button -->\n                <button type=\"submit\" class=\"btn btn-primary w-100 btn-lg mb-4\">\n                  <i class=\"bi bi-box-arrow-in-right me-2\"></i>Sign In\n                </button>\n\n                <!-- Alerts -->\n                <div v-if=\"error\" class=\"alert alert-danger mb-4\">\n                  <i class=\"bi bi-exclamation-circle-fill me-2\"></i>{{ error }}\n                </div>\n                <div v-if=\"success\" class=\"alert alert-success mb-4\">\n                  <i class=\"bi bi-check-circle-fill me-2\"></i>{{ success }}\n                </div>\n\n                <!-- Registration Link -->\n                <div class=\"text-center text-muted mt-4\">\n                  <p class=\"mb-0\">\n                    Don't have an account?\n                    <router-link to=\"/register\" class=\"text-primary fw-bold text-decoration-none\">\n                      Create one now\n                    </router-link>\n                  </p>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      error: \"\",\n      success: \"\",\n    };\n  },\n  methods: {\n    async login() {\n      // ✅ Clear old session\n      localStorage.removeItem(\"user\");\n      localStorage.removeItem(\"token\");\n      delete axios.defaults.headers.common[\"Authorization\"];\n\n      try {\n        const response = await axios.post(\"http://localhost:8080/auth/login\", {\n          email: this.email,\n          password: this.password,\n        });\n\n        const token = response.data.token;\n\n        if (token) {\n          // ✅ Save new token and user\n          localStorage.setItem(\"user\", JSON.stringify(response.data));\n          localStorage.setItem(\"token\", token);\n          axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n\n          this.success = \"Login successful! Redirecting...\";\n          this.error = \"\";\n\n          this.redirectUser(\"UserDashboard\");\n        } else {\n          this.error = \"Login failed: token not found in response.\";\n          this.success = \"\";\n        }\n      } catch (err) {\n        this.error = \"Invalid credentials. Please try again.\";\n        this.success = \"\";\n        console.error(\"Login failed:\", err);\n      }\n    },\n    redirectUser(routeName) {\n      this.$router.replace({ name: routeName }).then(() => {\n        window.location.reload();\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.login-header {\n  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);\n  border-radius: 0 0 2rem 2rem;\n}\n\n.card {\n  border-radius: 1.5rem;\n  margin-top: -4rem;\n}\n\n.form-control {\n  border-radius: 0.75rem;\n  padding: 1rem;\n  border: 1px solid #e5e7eb;\n}\n\n.form-control:focus {\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);\n  border-color: #3b82f6;\n}\n\n.btn-primary {\n  border-radius: 0.75rem;\n  padding: 1rem;\n  transition: all 0.3s ease;\n}\n\n.btn-primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 0.5rem 1rem rgba(59, 130, 246, 0.2);\n}\n\n.alert {\n  border-radius: 0.75rem;\n}\n\n.text-primary {\n  color: #3b82f6 !important;\n}\n\n@media (max-width: 768px) {\n  .card {\n    margin-top: -2rem;\n  }\n\n  .login-header {\n    border-radius: 0 0 1.5rem 1.5rem;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}