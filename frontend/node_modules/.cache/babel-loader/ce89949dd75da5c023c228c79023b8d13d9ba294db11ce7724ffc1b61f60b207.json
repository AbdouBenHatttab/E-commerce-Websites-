{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport { Modal } from 'bootstrap';\nimport ProductService from '@/services/ProductService';\nexport default {\n  name: 'AdminProducts',\n  data() {\n    return {\n      products: [],\n      isEditing: false,\n      newProduct: this.resetProduct(),\n      modal: null\n    };\n  },\n  async created() {\n    await this.fetchProducts();\n    this.initModal();\n  },\n  methods: {\n    async fetchProducts() {\n      try {\n        const response = await ProductService.getAllProducts();\n        this.products = response.data;\n      } catch (error) {\n        this.showError('Failed to fetch products', error);\n      }\n    },\n    initModal() {\n      this.modal = new Modal(document.getElementById('productModal'));\n    },\n    openModal(editMode, product = null) {\n      this.isEditing = editMode;\n      this.newProduct = product ? {\n        ...product\n      } : this.resetProduct();\n      this.modal.show();\n    },\n    async submitForm() {\n      try {\n        if (this.isEditing) {\n          await ProductService.updateProduct(this.newProduct.id, this.newProduct);\n        } else {\n          const response = await ProductService.createProduct(this.newProduct);\n          this.products.push(response.data);\n        }\n        this.closeModal();\n        await this.fetchProducts();\n      } catch (error) {\n        this.showError(this.isEditing ? 'Update failed' : 'Creation failed', error);\n      }\n    },\n    async confirmDelete(id) {\n      if (confirm('Are you sure you want to delete this product?')) {\n        try {\n          await ProductService.deleteProduct(id);\n          this.products = this.products.filter(p => p.id !== id);\n        } catch (error) {\n          this.showError('Deletion failed', error);\n        }\n      }\n    },\n    closeModal() {\n      this.modal.hide();\n      this.resetProduct();\n    },\n    resetProduct() {\n      return {\n        id: null,\n        name: '',\n        description: '',\n        price: 0,\n        stock: 0,\n        category: '',\n        imageUrl: ''\n      };\n    },\n    truncateDescription(text, length = 100) {\n      return text.length > length ? text.substring(0, length) + '...' : text;\n    },\n    showError(message, error) {\n      console.error(message, error);\n      alert(`${message}: ${error.response?.data?.message || error.message}`);\n    },\n    goBack() {\n      this.$router.push({\n        name: 'AdminDashboard'\n      });\n    }\n  }\n};","map":{"version":3,"names":["Modal","ProductService","name","data","products","isEditing","newProduct","resetProduct","modal","created","fetchProducts","initModal","methods","response","getAllProducts","error","showError","document","getElementById","openModal","editMode","product","show","submitForm","updateProduct","id","createProduct","push","closeModal","confirmDelete","confirm","deleteProduct","filter","p","hide","description","price","stock","category","imageUrl","truncateDescription","text","length","substring","message","console","alert","goBack","$router"],"sources":["C:\\Users\\Hedib\\OneDrive\\Bureau\\hello-word-vue\\src\\components\\admin\\AdminProducts.vue"],"sourcesContent":["<template>\n  <div class=\"container mt-5\">\n    <h2 class=\"text-center mb-4\">Manage Products</h2>\n\n    <!-- Add Product Button -->\n    <button class=\"btn btn-success mb-3\" @click=\"openModal(false)\">\n      <i class=\"fas fa-plus-circle\"></i> Add Product\n    </button>\n\n    <!-- Products Grid -->\n    <div v-if=\"products.length\" class=\"row\">\n      <div v-for=\"product in products\" :key=\"product.id\" class=\"col-md-4 mb-4\">\n        <div class=\"card h-100 shadow-sm\">\n          <img :src=\"product.imageUrl || 'https://via.placeholder.com/200'\" \n               class=\"card-img-top\" \n               alt=\"Product Image\"\n               style=\"height: 200px; object-fit: cover\">\n          <div class=\"card-body\">\n            <h5 class=\"card-title\">{{ product.name }}</h5>\n            <p class=\"card-text text-muted\">{{ truncateDescription(product.description) }}</p>\n            <div class=\"product-details\">\n              <p><strong>Price:</strong> ${{ product.price.toFixed(2) }}</p>\n              <p><strong>Stock:</strong> {{ product.stock }}</p>\n              <p><strong>Category:</strong> {{ product.category }}</p>\n            </div>\n          </div>\n          <div class=\"card-footer d-flex justify-content-between\">\n            <button class=\"btn btn-warning btn-sm\" @click=\"openModal(true, product)\">\n              <i class=\"fas fa-edit\"></i> Edit\n            </button>\n            <button class=\"btn btn-danger btn-sm\" @click=\"confirmDelete(product.id)\">\n              <i class=\"fas fa-trash\"></i> Delete\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Empty State -->\n    <div v-else class=\"alert alert-info\">\n      No products found. Start by adding a new product.\n    </div>\n\n    <!-- Product Modal -->\n    <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\">\n      <div class=\"modal-dialog modal-dialog-centered\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">{{ isEditing ? 'Edit Product' : 'Add Product' }}</h5>\n            <button type=\"button\" class=\"btn-close\" @click=\"closeModal\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <form @submit.prevent=\"submitForm\">\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Name</label>\n                <input type=\"text\" class=\"form-control\" v-model=\"newProduct.name\" required>\n              </div>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Description</label>\n                <textarea class=\"form-control\" v-model=\"newProduct.description\" required></textarea>\n              </div>\n              <div class=\"row g-3\">\n                <div class=\"col-md-6\">\n                  <label class=\"form-label\">Price ($)</label>\n                  <input type=\"number\" step=\"0.01\" class=\"form-control\" \n                         v-model.number=\"newProduct.price\" required>\n                </div>\n                <div class=\"col-md-6\">\n                  <label class=\"form-label\">Stock</label>\n                  <input type=\"number\" class=\"form-control\" \n                         v-model.number=\"newProduct.stock\" required>\n                </div>\n              </div>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Category</label>\n                <input type=\"text\" class=\"form-control\" v-model=\"newProduct.category\" required>\n              </div>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">Image URL</label>\n                <input type=\"url\" class=\"form-control\" v-model=\"newProduct.imageUrl\">\n              </div>\n              <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeModal\">Cancel</button>\n                <button type=\"submit\" class=\"btn btn-primary\">\n                  {{ isEditing ? 'Update' : 'Save' }}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <button class=\"btn btn-secondary mt-3\" @click=\"goBack\">Back</button>\n  </div>\n</template>\n\n<script>\nimport { Modal } from 'bootstrap'\nimport ProductService from '@/services/ProductService'\n\nexport default {\n  name: 'AdminProducts',\n  data() {\n    return {\n      products: [],\n      isEditing: false,\n      newProduct: this.resetProduct(),\n      modal: null\n    }\n  },\n  async created() {\n    await this.fetchProducts()\n    this.initModal()\n  },\n  methods: {\n    async fetchProducts() {\n      try {\n        const response = await ProductService.getAllProducts()\n        this.products = response.data\n      } catch (error) {\n        this.showError('Failed to fetch products', error)\n      }\n    },\n\n    initModal() {\n      this.modal = new Modal(document.getElementById('productModal'))\n    },\n\n    openModal(editMode, product = null) {\n      this.isEditing = editMode\n      this.newProduct = product ? { ...product } : this.resetProduct()\n      this.modal.show()\n    },\n\n    async submitForm() {\n      try {\n        if (this.isEditing) {\n          await ProductService.updateProduct(this.newProduct.id, this.newProduct)\n        } else {\n          const response = await ProductService.createProduct(this.newProduct)\n          this.products.push(response.data)\n        }\n        this.closeModal()\n        await this.fetchProducts()\n      } catch (error) {\n        this.showError(this.isEditing ? 'Update failed' : 'Creation failed', error)\n      }\n    },\n\n    async confirmDelete(id) {\n      if (confirm('Are you sure you want to delete this product?')) {\n        try {\n          await ProductService.deleteProduct(id)\n          this.products = this.products.filter(p => p.id !== id)\n        } catch (error) {\n          this.showError('Deletion failed', error)\n        }\n      }\n    },\n\n    closeModal() {\n      this.modal.hide()\n      this.resetProduct()\n    },\n\n    resetProduct() {\n      return {\n        id: null,\n        name: '',\n        description: '',\n        price: 0,\n        stock: 0,\n        category: '',\n        imageUrl: ''\n      }\n    },\n\n    truncateDescription(text, length = 100) {\n      return text.length > length ? text.substring(0, length) + '...' : text\n    },\n\n    showError(message, error) {\n      console.error(message, error)\n      alert(`${message}: ${error.response?.data?.message || error.message}`)\n    },\n\n    goBack() {\n      this.$router.push({ name: 'AdminDashboard' })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.card {\n  transition: transform 0.2s;\n  border-radius: 8px;\n}\n\n.card:hover {\n  transform: translateY(-5px);\n}\n\n.card-img-top {\n  object-fit: cover;\n  height: 200px;\n}\n\n.product-details p {\n  margin-bottom: 0.5rem;\n}\n\n.modal-content {\n  border-radius: 12px;\n}\n\n.btn-sm {\n  padding: 0.25rem 0.5rem;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}