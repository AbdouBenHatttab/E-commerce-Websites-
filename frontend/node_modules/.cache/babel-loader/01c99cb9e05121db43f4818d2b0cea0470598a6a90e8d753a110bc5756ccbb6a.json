{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"contact-messages-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"alert alert-info\"\n};\nconst _hoisted_3 = {\n  class: \"card-content\"\n};\nconst _hoisted_4 = {\n  class: \"message-header\"\n};\nconst _hoisted_5 = {\n  class: \"sender-name\"\n};\nconst _hoisted_6 = {\n  class: \"sender-email\"\n};\nconst _hoisted_7 = {\n  class: \"message-body\"\n};\nconst _hoisted_8 = {\n  class: \"message-footer\"\n};\nconst _hoisted_9 = {\n  class: \"timestamp\"\n};\nconst _hoisted_10 = {\n  class: \"admin-controls\"\n};\nconst _hoisted_11 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"h2\", {\n    class: \"text-center mb-4\"\n  }, \"Contact Messages\", -1 /* HOISTED */)), _createCommentVNode(\" No messages available \"), $data.messages.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \" No messages found in the database. \")) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Messages List \"), _createElementVNode(\"div\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, message => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: message.id,\n      class: \"message-card\"\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h5\", _hoisted_5, _toDisplayString(message.name), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_6, _toDisplayString(message.email), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_7, _toDisplayString(message.message), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"time\", _hoisted_9, _toDisplayString($options.formatTimestamp(message.timestamp)), 1 /* TEXT */), _createCommentVNode(\" Delete button with confirmation \"), _createElementVNode(\"div\", _hoisted_10, [$options.isAdmin ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => _ctx.confirm('Delete this message permanently?') && $options.deleteMessage(message.id),\n      class: \"delete-button\",\n      \"aria-label\": \"Delete message\"\n    }, \" üóëÔ∏è Delete \", 8 /* PROPS */, _hoisted_11)) : _createCommentVNode(\"v-if\", true)])])])]);\n  }), 128 /* KEYED_FRAGMENT */))])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","$data","messages","length","_hoisted_2","_Fragment","_renderList","message","id","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","name","_hoisted_6","email","_hoisted_7","_hoisted_8","_hoisted_9","$options","formatTimestamp","timestamp","_hoisted_10","isAdmin","onClick","$event","_ctx","confirm","deleteMessage","_hoisted_11"],"sources":["C:\\Users\\Hedib\\OneDrive\\Bureau\\hello-word-vue\\src\\components\\admin\\ContactMessages.vue"],"sourcesContent":["<template>\n  <div class=\"contact-messages-container\">\n    <h2 class=\"text-center mb-4\">Contact Messages</h2>\n\n    <!-- No messages available -->\n    <div v-if=\"messages.length === 0\" class=\"alert alert-info\">\n      No messages found in the database.\n    </div>\n\n    <!-- Messages List -->\n    <div v-else>\n      <div\n        v-for=\"message in messages\"\n        :key=\"message.id\"\n        class=\"message-card\"\n      >\n        <div class=\"card-content\">\n          <div class=\"message-header\">\n            <h5 class=\"sender-name\">{{ message.name }}</h5>\n            <span class=\"sender-email\">{{ message.email }}</span>\n          </div>\n          \n          <p class=\"message-body\">{{ message.message }}</p>\n          \n          <div class=\"message-footer\">\n            <time class=\"timestamp\">\n              {{ formatTimestamp(message.timestamp) }}\n            </time>\n            \n            <!-- Delete button with confirmation -->\n            <div class=\"admin-controls\">\n              <button\n                v-if=\"isAdmin\"\n                @click=\"confirm('Delete this message permanently?') && deleteMessage(message.id)\"\n                class=\"delete-button\"\n                aria-label=\"Delete message\"\n              >\n                üóëÔ∏è Delete\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<!-- Script section remains completely untouched -->\n<script>\nimport ContactService from '@/services/ContactService';\n\nexport default {\n  name: 'ContactMessages',\n  data() {\n    return {\n      messages: [], // Store the messages fetched from the backend\n    };\n  },\n  computed: {\n    // Check if the user is an admin (can be modified for your authentication mechanism)\n    isAdmin() {\n      return localStorage.getItem('role') === 'ROLE_ADMIN';\n    },\n  },\n  async created() {\n    try {\n      // Fetch messages from the backend API\n      this.messages = await ContactService.getAllMessages();\n    } catch (error) {\n      console.error('Error fetching contact messages:', error);\n    }\n  },\n  methods: {\n    // Format the timestamp to a readable format\n    formatTimestamp(timestamp) {\n      const date = new Date(timestamp);\n      return date.toLocaleString('en-US', {\n        weekday: 'short',\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric',\n      });\n    },\n\n    // Method to delete the message\n    async deleteMessage(id) {\n      try {\n        await ContactService.deleteMessage(id);\n        this.messages = this.messages.filter((message) => message.id !== id);\n      } catch (error) {\n        console.error('Error deleting message:', error);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.contact-messages-container {\n  padding: 2rem;\n  max-width: 800px;\n  margin: 0 auto;\n}\n\n.message-card {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  margin-bottom: 1.5rem;\n  transition: transform 0.2s ease;\n}\n\n.message-card:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n.card-content {\n  padding: 1.5rem;\n}\n\n.message-header {\n  border-bottom: 1px solid #eee;\n  padding-bottom: 1rem;\n  margin-bottom: 1rem;\n}\n\n.sender-name {\n  color: #2c3e50;\n  margin: 0;\n  font-size: 1.25rem;\n}\n\n.sender-email {\n  color: #7f8c8d;\n  font-size: 0.9rem;\n}\n\n.message-body {\n  color: #34495e;\n  line-height: 1.6;\n  margin-bottom: 1.5rem;\n}\n\n.message-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.timestamp {\n  color: #95a5a6;\n  font-size: 0.85rem;\n}\n\n.delete-button {\n  background: #ff4757;\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: background 0.3s ease;\n}\n\n.delete-button:hover {\n  background: #ff6b81;\n}\n\n.alert {\n  text-align: center;\n  padding: 1.5rem;\n  border-radius: 8px;\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAA4B;;EADzCC,GAAA;EAKsCD,KAAK,EAAC;;;EAW/BA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAgB;;EACrBA,KAAK,EAAC;AAAa;;EACjBA,KAAK,EAAC;AAAc;;EAGzBA,KAAK,EAAC;AAAc;;EAElBA,KAAK,EAAC;AAAgB;;EACnBA,KAAK,EAAC;AAAW;;EAKlBA,KAAK,EAAC;AAAgB;oBA9BvC;;uBACEE,mBAAA,CA2CM,OA3CNC,UA2CM,G,0BA1CJC,mBAAA,CAAkD;IAA9CJ,KAAK,EAAC;EAAkB,GAAC,kBAAgB,sBAE7CK,mBAAA,2BAA8B,EACnBC,KAAA,CAAAC,QAAQ,CAACC,MAAM,U,cAA1BN,mBAAA,CAEM,OAFNO,UAEM,EAFqD,sCAE3D,M,cAGAP,mBAAA,CAiCMQ,SAAA;IA3CVT,GAAA;EAAA,IASII,mBAAA,mBAAsB,EACtBD,mBAAA,CAiCM,e,kBAhCJF,mBAAA,CA+BMQ,SAAA,QA1CZC,WAAA,CAY0BL,KAAA,CAAAC,QAAQ,EAAnBK,OAAO;yBADhBV,mBAAA,CA+BM;MA7BHD,GAAG,EAAEW,OAAO,CAACC,EAAE;MAChBb,KAAK,EAAC;QAENI,mBAAA,CAyBM,OAzBNU,UAyBM,GAxBJV,mBAAA,CAGM,OAHNW,UAGM,GAFJX,mBAAA,CAA+C,MAA/CY,UAA+C,EAAAC,gBAAA,CAApBL,OAAO,CAACM,IAAI,kBACvCd,mBAAA,CAAqD,QAArDe,UAAqD,EAAAF,gBAAA,CAAvBL,OAAO,CAACQ,KAAK,iB,GAG7ChB,mBAAA,CAAiD,KAAjDiB,UAAiD,EAAAJ,gBAAA,CAAtBL,OAAO,CAACA,OAAO,kBAE1CR,mBAAA,CAgBM,OAhBNkB,UAgBM,GAfJlB,mBAAA,CAEO,QAFPmB,UAEO,EAAAN,gBAAA,CADFO,QAAA,CAAAC,eAAe,CAACb,OAAO,CAACc,SAAS,mBAGtCrB,mBAAA,qCAAwC,EACxCD,mBAAA,CASM,OATNuB,WASM,GAPIH,QAAA,CAAAI,OAAO,I,cADf1B,mBAAA,CAOS;MAtCvBD,GAAA;MAiCiB4B,OAAK,EAAAC,MAAA,IAAEC,IAAA,CAAAC,OAAO,wCAAwCR,QAAA,CAAAS,aAAa,CAACrB,OAAO,CAACC,EAAE;MAC/Eb,KAAK,EAAC,eAAe;MACrB,YAAU,EAAC;OACZ,cAED,iBAtCdkC,WAAA,KAAA7B,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}