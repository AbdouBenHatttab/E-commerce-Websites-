{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"contact-messages-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"alert alert-info\"\n};\nconst _hoisted_3 = {\n  class: \"card-body\"\n};\nconst _hoisted_4 = {\n  class: \"card-title\"\n};\nconst _hoisted_5 = {\n  class: \"card-subtitle mb-2 text-muted\"\n};\nconst _hoisted_6 = {\n  class: \"card-text\"\n};\nconst _hoisted_7 = {\n  class: \"card-text\"\n};\nconst _hoisted_8 = {\n  class: \"text-muted\"\n};\nconst _hoisted_9 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"h2\", {\n    class: \"text-center mb-4\"\n  }, \"Contact Us Messages\", -1 /* HOISTED */)), _createCommentVNode(\" No messages available \"), $data.messages.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \" No messages available. \")) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Messages List \"), _createElementVNode(\"div\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, message => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: message.id,\n      class: \"card mb-3\"\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h5\", _hoisted_4, _toDisplayString(message.name), 1 /* TEXT */), _createElementVNode(\"h6\", _hoisted_5, _toDisplayString(message.email), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_6, _toDisplayString(message.message), 1 /* TEXT */), _createCommentVNode(\" Display the timestamp \"), _createElementVNode(\"p\", _hoisted_7, [_createElementVNode(\"small\", _hoisted_8, \"Sent on: \" + _toDisplayString($options.formatTimestamp(message.timestamp)), 1 /* TEXT */)]), _createCommentVNode(\" Delete Button for Admin \"), $options.isAdmin ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => $options.deleteMessage(message.id),\n      class: \"btn btn-danger btn-sm\"\n    }, \" Delete \", 8 /* PROPS */, _hoisted_9)) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */))])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","$data","messages","length","_hoisted_2","_Fragment","_renderList","message","id","_hoisted_3","_hoisted_4","_toDisplayString","name","_hoisted_5","email","_hoisted_6","_hoisted_7","_hoisted_8","$options","formatTimestamp","timestamp","isAdmin","onClick","$event","deleteMessage","_hoisted_9"],"sources":["C:\\Users\\Hedib\\OneDrive\\Bureau\\hello-word-vue\\src\\components\\admin\\ContactMessages.vue"],"sourcesContent":["<template>\n  <div class=\"contact-messages-container\">\n    <h2 class=\"text-center mb-4\">Contact Us Messages</h2>\n\n    <!-- No messages available -->\n    <div v-if=\"messages.length === 0\" class=\"alert alert-info\">\n      No messages available.\n    </div>\n\n    <!-- Messages List -->\n    <div v-else>\n      <div v-for=\"message in messages\" :key=\"message.id\" class=\"card mb-3\">\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">{{ message.name }}</h5>\n          <h6 class=\"card-subtitle mb-2 text-muted\">{{ message.email }}</h6>\n          <p class=\"card-text\">{{ message.message }}</p>\n          <!-- Display the timestamp -->\n          <p class=\"card-text\">\n            <small class=\"text-muted\"\n              >Sent on: {{ formatTimestamp(message.timestamp) }}</small\n            >\n          </p>\n\n          <!-- Delete Button for Admin -->\n          <button\n            v-if=\"isAdmin\"\n            @click=\"deleteMessage(message.id)\"\n            class=\"btn btn-danger btn-sm\"\n          >\n            Delete\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ContactService from '@/services/ContactService';\n\nexport default {\n  name: 'ContactMessages',\n  data() {\n    return {\n      messages: [], // Initialize messages as an empty array\n    };\n  },\n  computed: {\n    // Check if the user is an admin by reading from localStorage\n    isAdmin() {\n      return localStorage.getItem('role') === 'ROLE_ADMIN'; // Check if role is admin\n    },\n  },\n  async created() {\n    try {\n      // Fetch contact messages from the backend\n      this.messages = await ContactService.getAllMessages();\n      console.log('Fetched messages:', this.messages); // Log the fetched messages\n    } catch (error) {\n      console.error('Error fetching contact messages:', error);\n    }\n  },\n  methods: {\n    async deleteMessage(id) {\n      try {\n        // Delete message and remove from local list\n        await ContactService.deleteMessage(id);\n        this.messages = this.messages.filter((message) => message.id !== id);\n      } catch (error) {\n        console.error('Error deleting message:', error);\n      }\n    },\n    // Format the timestamp to a readable date\n    formatTimestamp(timestamp) {\n      const date = new Date(timestamp);\n      return date.toLocaleString(); // This will format the timestamp as a readable date\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* Add custom styles here */\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAA4B;;EADzCC,GAAA;EAKsCD,KAAK,EAAC;;;EAO/BA,KAAK,EAAC;AAAW;;EAChBA,KAAK,EAAC;AAAY;;EAClBA,KAAK,EAAC;AAA+B;;EACtCA,KAAK,EAAC;AAAW;;EAEjBA,KAAK,EAAC;AAAW;;EACXA,KAAK,EAAC;AAAY;mBAlBrC;;uBACEE,mBAAA,CAiCM,OAjCNC,UAiCM,G,0BAhCJC,mBAAA,CAAqD;IAAjDJ,KAAK,EAAC;EAAkB,GAAC,qBAAmB,sBAEhDK,mBAAA,2BAA8B,EACnBC,KAAA,CAAAC,QAAQ,CAACC,MAAM,U,cAA1BN,mBAAA,CAEM,OAFNO,UAEM,EAFqD,0BAE3D,M,cAGAP,mBAAA,CAuBMQ,SAAA;IAjCVT,GAAA;EAAA,IASII,mBAAA,mBAAsB,EACtBD,mBAAA,CAuBM,e,kBAtBJF,mBAAA,CAqBMQ,SAAA,QAhCZC,WAAA,CAW6BL,KAAA,CAAAC,QAAQ,EAAnBK,OAAO;yBAAnBV,mBAAA,CAqBM;MArB4BD,GAAG,EAAEW,OAAO,CAACC,EAAE;MAAEb,KAAK,EAAC;QACvDI,mBAAA,CAmBM,OAnBNU,UAmBM,GAlBJV,mBAAA,CAA8C,MAA9CW,UAA8C,EAAAC,gBAAA,CAApBJ,OAAO,CAACK,IAAI,kBACtCb,mBAAA,CAAkE,MAAlEc,UAAkE,EAAAF,gBAAA,CAArBJ,OAAO,CAACO,KAAK,kBAC1Df,mBAAA,CAA8C,KAA9CgB,UAA8C,EAAAJ,gBAAA,CAAtBJ,OAAO,CAACA,OAAO,kBACvCP,mBAAA,2BAA8B,EAC9BD,mBAAA,CAII,KAJJiB,UAII,GAHFjB,mBAAA,CAEC,SAFDkB,UAEC,EADE,WAAS,GAAAN,gBAAA,CAAGO,QAAA,CAAAC,eAAe,CAACZ,OAAO,CAACa,SAAS,kB,GAIlDpB,mBAAA,6BAAgC,EAExBkB,QAAA,CAAAG,OAAO,I,cADfxB,mBAAA,CAMS;MA9BnBD,GAAA;MA0Ba0B,OAAK,EAAAC,MAAA,IAAEL,QAAA,CAAAM,aAAa,CAACjB,OAAO,CAACC,EAAE;MAChCb,KAAK,EAAC;OACP,UAED,iBA9BV8B,UAAA,KAAAzB,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}