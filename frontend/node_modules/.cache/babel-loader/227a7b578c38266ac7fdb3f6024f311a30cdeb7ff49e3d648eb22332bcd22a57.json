{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport AuthService from '@/services/AuthService';\nimport UserService from '@/services/UserService';\nexport default {\n  name: 'AdminProfile',\n  data() {\n    return {\n      user: null,\n      userForm: {\n        name: '',\n        email: '',\n        phoneNumber: '',\n        address: '',\n        imageUrl: ''\n      },\n      isModalVisible: false\n    };\n  },\n  async mounted() {\n    this.fetchAdminProfile();\n  },\n  methods: {\n    async fetchAdminProfile() {\n      try {\n        const user = AuthService.getCurrentUser();\n        if (user) {\n          this.user = user;\n          this.userForm = {\n            ...this.user\n          }; // Initialize form data with current user\n        } else {\n          console.error('User is not logged in.');\n        }\n      } catch (error) {\n        console.error('Error fetching admin profile:', error);\n      }\n    },\n    showModal() {\n      this.isModalVisible = true;\n    },\n    closeModal() {\n      this.isModalVisible = false;\n    },\n    async updateProfile() {\n      try {\n        const userId = this.user.id; // The logged-in user's ID\n        const updatedUserData = {\n          ...this.userForm\n        }; // Use the form data\n\n        // Call the UserService to update the user\n        const response = await UserService.updateUser(userId, updatedUserData);\n        console.log('Profile updated:', response.data);\n\n        // After successful update, update the user in localStorage\n        AuthService.setUser(response.data); // Assuming `setUser` method is added in AuthService\n\n        // Update local state\n        this.user = {\n          ...response.data\n        };\n        this.closeModal();\n      } catch (error) {\n        console.error('Error updating profile:', error);\n      }\n    },\n    goBack() {\n      this.$router.push({\n        name: 'AdminDashboard'\n      });\n    }\n  }\n};","map":{"version":3,"names":["AuthService","UserService","name","data","user","userForm","email","phoneNumber","address","imageUrl","isModalVisible","mounted","fetchAdminProfile","methods","getCurrentUser","console","error","showModal","closeModal","updateProfile","userId","id","updatedUserData","response","updateUser","log","setUser","goBack","$router","push"],"sources":["C:\\Users\\Hedib\\OneDrive\\Bureau\\hello-word-vue\\src\\components\\admin\\AdminProfile.vue"],"sourcesContent":["<template>\n  <div class=\"container py-5\">\n    <h2 class=\"text-center mb-5 display-4 text-primary fw-bold\">Admin Profile</h2>\n\n    <!-- Loading State -->\n    <div v-if=\"!user\" class=\"d-flex justify-content-center py-5\">\n      <div class=\"spinner-border text-primary\" style=\"width: 3rem; height: 3rem;\" role=\"status\">\n        <span class=\"visually-hidden\">Loading...</span>\n      </div>\n    </div>\n\n    <!-- Profile Section -->\n    <div v-else>\n      <div class=\"row justify-content-center g-4\">\n        <!-- Profile Image and Info -->\n        <div class=\"col-lg-4 col-md-6\">\n          <div class=\"card border-0 shadow-lg h-100\">\n            <div class=\"card-body text-center p-4\">\n              <div class=\"position-relative d-inline-block\">\n                <img\n                  v-if=\"user.imageUrl\"\n                  :src=\"user.imageUrl\"\n                  class=\"img-fluid rounded-circle shadow-lg\"\n                  alt=\"User Image\"\n                  style=\"width: 180px; height: 180px; object-fit: cover; border: 4px solid #fff;\"\n                />\n                <div\n                  v-else\n                  class=\"rounded-circle bg-primary d-flex align-items-center justify-content-center\"\n                  style=\"width: 180px; height: 180px; border: 4px solid #fff;\"\n                >\n                  <i class=\"bi bi-person-fill text-white\" style=\"font-size: 5rem;\"></i>\n                </div>\n              </div>\n              <h3 class=\"mt-4 mb-2 fw-bold text-dark\">{{ user.name }}</h3>\n              <div class=\"badge bg-primary bg-opacity-25 text-primary fs-6 mb-3\">{{ user.role }}</div>\n              <div class=\"d-flex justify-content-center gap-2\">\n                <span class=\"badge bg-success bg-opacity-25 text-success\">{{ user.status }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- User Info and Actions -->\n        <div class=\"col-md-6\">\n          <div class=\"card border-0 shadow-lg h-100\">\n            <div class=\"card-body p-4\">\n              <h4 class=\"card-title mb-4 text-primary fw-bold\">Personal Information</h4>\n              <ul class=\"list-unstyled fs-5\">\n                <li class=\"mb-3\">\n                  <i class=\"bi bi-envelope-fill me-2 text-primary\"></i>\n                  <strong>Email:</strong> {{ user.email }}\n                </li>\n                <li class=\"mb-3\">\n                  <i class=\"bi bi-telephone-fill me-2 text-primary\"></i>\n                  <strong>Phone:</strong> {{ user.phoneNumber || 'N/A' }}\n                </li>\n                <li class=\"mb-3\">\n                  <i class=\"bi bi-geo-alt-fill me-2 text-primary\"></i>\n                  <strong>Address:</strong> {{ user.address || 'N/A' }}\n                </li>\n              </ul>\n              <div class=\"d-grid gap-3 mt-auto\">\n                <button @click=\"showModal\" class=\"btn btn-primary btn-lg\">\n                  <i class=\"bi bi-pencil-square me-2\"></i>Edit Profile\n                </button>\n                <button @click=\"goBack\" class=\"btn btn-outline-primary btn-lg\">\n                  <i class=\"bi bi-arrow-left-circle me-2\"></i>Back to Dashboard\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Edit Profile Modal -->\n    <div\n      v-if=\"isModalVisible\"\n      class=\"modal fade show\"\n      tabindex=\"-1\"\n      style=\"display: block; background-color: rgba(0, 0, 0, 0.5)\"\n    >\n      <div class=\"modal-dialog modal-dialog-centered\">\n        <div class=\"modal-content border-0 shadow-lg\">\n          <div class=\"modal-header bg-primary text-white\">\n            <h5 class=\"modal-title\">Edit Profile</h5>\n            <button type=\"button\" class=\"btn-close btn-close-white\" @click=\"closeModal\"></button>\n          </div>\n          <div class=\"modal-body p-4\">\n            <form @submit.prevent=\"updateProfile\">\n              <div class=\"mb-4\">\n                <label for=\"name\" class=\"form-label\">Name</label>\n                <input\n                  id=\"name\"\n                  type=\"text\"\n                  class=\"form-control form-control-lg\"\n                  v-model=\"userForm.name\"\n                  required\n                />\n              </div>\n              <div class=\"mb-4\">\n                <label for=\"email\" class=\"form-label\">Email</label>\n                <input\n                  id=\"email\"\n                  type=\"email\"\n                  class=\"form-control form-control-lg\"\n                  v-model=\"userForm.email\"\n                  required\n                  disabled\n                />\n              </div>\n              <div class=\"mb-4\">\n                <label for=\"phoneNumber\" class=\"form-label\">Phone Number</label>\n                <input\n                  id=\"phoneNumber\"\n                  type=\"text\"\n                  class=\"form-control form-control-lg\"\n                  v-model=\"userForm.phoneNumber\"\n                />\n              </div>\n              <div class=\"mb-4\">\n                <label for=\"address\" class=\"form-label\">Address</label>\n                <input\n                  id=\"address\"\n                  type=\"text\"\n                  class=\"form-control form-control-lg\"\n                  v-model=\"userForm.address\"\n                />\n              </div>\n              <div class=\"mb-4\">\n                <label for=\"imageUrl\" class=\"form-label\">Profile Image URL</label>\n                <input\n                  id=\"imageUrl\"\n                  type=\"text\"\n                  class=\"form-control form-control-lg\"\n                  v-model=\"userForm.imageUrl\"\n                  placeholder=\"https://example.com/image.jpg\"\n                />\n              </div>\n              <div class=\"d-grid gap-3\">\n                <button type=\"submit\" class=\"btn btn-primary btn-lg\">\n                  <i class=\"bi bi-save me-2\"></i>Save Changes\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-secondary btn-lg\" @click=\"closeModal\">\n                  Cancel\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AuthService from '@/services/AuthService';\nimport UserService from '@/services/UserService';\n\nexport default {\n  name: 'AdminProfile',\n  data() {\n    return {\n      user: null,\n      userForm: {\n        name: '',\n        email: '',\n        phoneNumber: '',\n        address: '',\n        imageUrl: '',\n      },\n      isModalVisible: false,\n    };\n  },\n  async mounted() {\n    this.fetchAdminProfile();\n  },\n  methods: {\n    async fetchAdminProfile() {\n      try {\n        const user = AuthService.getCurrentUser();\n        if (user) {\n          this.user = user;\n          this.userForm = { ...this.user }; // Initialize form data with current user\n        } else {\n          console.error('User is not logged in.');\n        }\n      } catch (error) {\n        console.error('Error fetching admin profile:', error);\n      }\n    },\n    showModal() {\n      this.isModalVisible = true;\n    },\n    closeModal() {\n      this.isModalVisible = false;\n    },\n    async updateProfile() {\n      try {\n        const userId = this.user.id; // The logged-in user's ID\n        const updatedUserData = { ...this.userForm }; // Use the form data\n\n        // Call the UserService to update the user\n        const response = await UserService.updateUser(userId, updatedUserData);\n        console.log('Profile updated:', response.data);\n\n        // After successful update, update the user in localStorage\n        AuthService.setUser(response.data); // Assuming `setUser` method is added in AuthService\n\n        // Update local state\n        this.user = { ...response.data };\n        this.closeModal();\n      } catch (error) {\n        console.error('Error updating profile:', error);\n      }\n    },\n    goBack() {\n      this.$router.push({ name: 'AdminDashboard' });\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* Add the styles from previous steps here */\n</style>\nt\n"],"mappings":";AA6JA,OAAOA,WAAU,MAAO,wBAAwB;AAChD,OAAOC,WAAU,MAAO,wBAAwB;AAEhD,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,IAAI;MACVC,QAAQ,EAAE;QACRH,IAAI,EAAE,EAAE;QACRI,KAAK,EAAE,EAAE;QACTC,WAAW,EAAE,EAAE;QACfC,OAAO,EAAE,EAAE;QACXC,QAAQ,EAAE;MACZ,CAAC;MACDC,cAAc,EAAE;IAClB,CAAC;EACH,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,IAAI,CAACC,iBAAiB,CAAC,CAAC;EAC1B,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,iBAAiBA,CAAA,EAAG;MACxB,IAAI;QACF,MAAMR,IAAG,GAAIJ,WAAW,CAACc,cAAc,CAAC,CAAC;QACzC,IAAIV,IAAI,EAAE;UACR,IAAI,CAACA,IAAG,GAAIA,IAAI;UAChB,IAAI,CAACC,QAAO,GAAI;YAAE,GAAG,IAAI,CAACD;UAAK,CAAC,EAAE;QACpC,OAAO;UACLW,OAAO,CAACC,KAAK,CAAC,wBAAwB,CAAC;QACzC;MACF,EAAE,OAAOA,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACvD;IACF,CAAC;IACDC,SAASA,CAAA,EAAG;MACV,IAAI,CAACP,cAAa,GAAI,IAAI;IAC5B,CAAC;IACDQ,UAAUA,CAAA,EAAG;MACX,IAAI,CAACR,cAAa,GAAI,KAAK;IAC7B,CAAC;IACD,MAAMS,aAAaA,CAAA,EAAG;MACpB,IAAI;QACF,MAAMC,MAAK,GAAI,IAAI,CAAChB,IAAI,CAACiB,EAAE,EAAE;QAC7B,MAAMC,eAAc,GAAI;UAAE,GAAG,IAAI,CAACjB;QAAS,CAAC,EAAE;;QAE9C;QACA,MAAMkB,QAAO,GAAI,MAAMtB,WAAW,CAACuB,UAAU,CAACJ,MAAM,EAAEE,eAAe,CAAC;QACtEP,OAAO,CAACU,GAAG,CAAC,kBAAkB,EAAEF,QAAQ,CAACpB,IAAI,CAAC;;QAE9C;QACAH,WAAW,CAAC0B,OAAO,CAACH,QAAQ,CAACpB,IAAI,CAAC,EAAE;;QAEpC;QACA,IAAI,CAACC,IAAG,GAAI;UAAE,GAAGmB,QAAQ,CAACpB;QAAK,CAAC;QAChC,IAAI,CAACe,UAAU,CAAC,CAAC;MACnB,EAAE,OAAOF,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MACjD;IACF,CAAC;IACDW,MAAMA,CAAA,EAAG;MACP,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC;QAAE3B,IAAI,EAAE;MAAiB,CAAC,CAAC;IAC/C;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}