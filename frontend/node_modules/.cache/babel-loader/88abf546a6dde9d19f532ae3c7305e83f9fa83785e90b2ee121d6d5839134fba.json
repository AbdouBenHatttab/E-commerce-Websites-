{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport UserService from '@/services/UserService'; // Ensure the path and case match exactly\n\nexport default {\n  name: 'AdminUser',\n  data() {\n    return {\n      users: [],\n      selectedUser: null\n    };\n  },\n  async created() {\n    await this.fetchUsers();\n  },\n  methods: {\n    async fetchUsers() {\n      try {\n        const response = await UserService.getAllUsers();\n        this.users = response.data;\n      } catch (error) {\n        console.error('Error fetching users:', error);\n      }\n    },\n    selectUser(user) {\n      // Create a copy of the user to avoid directly modifying the list\n      this.selectedUser = {\n        ...user\n      };\n    },\n    async updateUser() {\n      try {\n        const response = await UserService.updateUser(this.selectedUser.id, this.selectedUser);\n        // Refresh the user list after update\n        await this.fetchUsers();\n        this.selectedUser = null;\n      } catch (error) {\n        console.error('Error updating user:', error);\n      }\n    },\n    async deleteUser(id) {\n      try {\n        await UserService.deleteUser(id);\n        this.users = this.users.filter(user => user.id !== id);\n      } catch (error) {\n        console.error('Error deleting user:', error);\n      }\n    },\n    cancelEdit() {\n      this.selectedUser = null;\n    },\n    goBack() {\n      this.$router.push({\n        name: 'AdminDashboard'\n      });\n    }\n  }\n};","map":{"version":3,"names":["UserService","name","data","users","selectedUser","created","fetchUsers","methods","response","getAllUsers","error","console","selectUser","user","updateUser","id","deleteUser","filter","cancelEdit","goBack","$router","push"],"sources":["C:\\Users\\Hedib\\OneDrive\\Bureau\\hello-word-vue\\src\\components\\admin\\AdminUsers.vue"],"sourcesContent":["<template>\n  <div class=\"container mt-5\">\n    <h2>Manage Users</h2>\n\n    <!-- Edit Form: Only shown if a user is selected for editing -->\n    <div v-if=\"selectedUser\" class=\"mb-5\">\n      <h3>Edit User</h3>\n      <form @submit.prevent=\"updateUser\">\n        <div class=\"mb-3\">\n          <label>Name:</label>\n          <input\n            type=\"text\"\n            v-model=\"selectedUser.name\"\n            class=\"form-control\"\n            required\n          />\n        </div>\n        <div class=\"mb-3\">\n          <label>Email:</label>\n          <input\n            type=\"email\"\n            v-model=\"selectedUser.email\"\n            class=\"form-control\"\n            required\n          />\n        </div>\n        <div class=\"mb-3\">\n          <label>Role:</label>\n          <select v-model=\"selectedUser.role\" class=\"form-select\">\n            <option value=\"ROLE_ADMIN\">Admin</option>\n            <option value=\"ROLE_USER\">User</option>\n          </select>\n        </div>\n        <div class=\"mb-3\">\n          <label>Status:</label>\n          <select v-model=\"selectedUser.status\" class=\"form-select\">\n            <option value=\"ACTIVE\">Active</option>\n            <option value=\"INACTIVE\">Inactive</option>\n          </select>\n        </div>\n        <div class=\"mb-3\">\n          <label>Phone Number:</label>\n          <input\n            type=\"text\"\n            v-model=\"selectedUser.phoneNumber\"\n            class=\"form-control\"\n          />\n        </div>\n        <div class=\"mb-3\">\n          <label>Address:</label>\n          <input\n            type=\"text\"\n            v-model=\"selectedUser.address\"\n            class=\"form-control\"\n          />\n        </div>\n        <div class=\"mb-3\">\n          <label>Image URL:</label>\n          <input\n            type=\"text\"\n            v-model=\"selectedUser.imageUrl\"\n            class=\"form-control\"\n            placeholder=\"Optional\"\n          />\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary\">Update User</button>\n        <button\n          type=\"button\"\n          class=\"btn btn-secondary ms-2\"\n          @click=\"cancelEdit\"\n        >\n          Cancel\n        </button>\n      </form>\n    </div>\n\n    <!-- Users Table: Only shown if no user is being edited -->\n    <table class=\"table mt-3\" v-else>\n      <thead>\n        <tr>\n          <th>ID</th>\n          <th>Name</th>\n          <th>Email</th>\n          <th>Role</th>\n          <th>Status</th>\n          <th>Phone</th>\n          <th>Address</th>\n          <th>Image URL</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"user in users\" :key=\"user.id\">\n          <td>{{ user.id }}</td>\n          <td>{{ user.name }}</td>\n          <td>{{ user.email }}</td>\n          <td>{{ user.role }}</td>\n          <td>{{ user.status }}</td>\n          <td>{{ user.phoneNumber }}</td>\n          <td>{{ user.address }}</td>\n          <td>{{ user.imageUrl }}</td>\n          <td>\n            <button\n              class=\"btn btn-warning btn-sm me-1\"\n              @click=\"selectUser(user)\"\n            >\n              Edit\n            </button>\n            <button class=\"btn btn-danger btn-sm\" @click=\"deleteUser(user.id)\">\n              Delete\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <button class=\"btn btn-secondary mt-3\" @click=\"goBack\">Back</button>\n  </div>\n</template>\n\n<script>\nimport UserService from '@/services/UserService'; // Ensure the path and case match exactly\n\nexport default {\n  name: 'AdminUser',\n  data() {\n    return {\n      users: [],\n      selectedUser: null,\n    };\n  },\n  async created() {\n    await this.fetchUsers();\n  },\n  methods: {\n    async fetchUsers() {\n      try {\n        const response = await UserService.getAllUsers();\n        this.users = response.data;\n      } catch (error) {\n        console.error('Error fetching users:', error);\n      }\n    },\n    selectUser(user) {\n      // Create a copy of the user to avoid directly modifying the list\n      this.selectedUser = { ...user };\n    },\n    async updateUser() {\n      try {\n        const response = await UserService.updateUser(\n          this.selectedUser.id,\n          this.selectedUser\n        );\n        // Refresh the user list after update\n        await this.fetchUsers();\n        this.selectedUser = null;\n      } catch (error) {\n        console.error('Error updating user:', error);\n      }\n    },\n    async deleteUser(id) {\n      try {\n        await UserService.deleteUser(id);\n        this.users = this.users.filter((user) => user.id !== id);\n      } catch (error) {\n        console.error('Error deleting user:', error);\n      }\n    },\n    cancelEdit() {\n      this.selectedUser = null;\n    },\n    goBack() {\n      this.$router.push({ name: 'AdminDashboard' });\n    },\n  },\n};\n</script>\n\n<style scoped>\ntable {\n  margin-top: 20px;\n}\n</style>\n"],"mappings":";;;AAyHA,OAAOA,WAAU,MAAO,wBAAwB,EAAE;;AAElD,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,YAAY,EAAE;IAChB,CAAC;EACH,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAACC,UAAU,CAAC,CAAC;EACzB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,UAAUA,CAAA,EAAG;MACjB,IAAI;QACF,MAAME,QAAO,GAAI,MAAMR,WAAW,CAACS,WAAW,CAAC,CAAC;QAChD,IAAI,CAACN,KAAI,GAAIK,QAAQ,CAACN,IAAI;MAC5B,EAAE,OAAOQ,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC/C;IACF,CAAC;IACDE,UAAUA,CAACC,IAAI,EAAE;MACf;MACA,IAAI,CAACT,YAAW,GAAI;QAAE,GAAGS;MAAK,CAAC;IACjC,CAAC;IACD,MAAMC,UAAUA,CAAA,EAAG;MACjB,IAAI;QACF,MAAMN,QAAO,GAAI,MAAMR,WAAW,CAACc,UAAU,CAC3C,IAAI,CAACV,YAAY,CAACW,EAAE,EACpB,IAAI,CAACX,YACP,CAAC;QACD;QACA,MAAM,IAAI,CAACE,UAAU,CAAC,CAAC;QACvB,IAAI,CAACF,YAAW,GAAI,IAAI;MAC1B,EAAE,OAAOM,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C;IACF,CAAC;IACD,MAAMM,UAAUA,CAACD,EAAE,EAAE;MACnB,IAAI;QACF,MAAMf,WAAW,CAACgB,UAAU,CAACD,EAAE,CAAC;QAChC,IAAI,CAACZ,KAAI,GAAI,IAAI,CAACA,KAAK,CAACc,MAAM,CAAEJ,IAAI,IAAKA,IAAI,CAACE,EAAC,KAAMA,EAAE,CAAC;MAC1D,EAAE,OAAOL,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C;IACF,CAAC;IACDQ,UAAUA,CAAA,EAAG;MACX,IAAI,CAACd,YAAW,GAAI,IAAI;IAC1B,CAAC;IACDe,MAAMA,CAAA,EAAG;MACP,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC;QAAEpB,IAAI,EAAE;MAAiB,CAAC,CAAC;IAC/C;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}