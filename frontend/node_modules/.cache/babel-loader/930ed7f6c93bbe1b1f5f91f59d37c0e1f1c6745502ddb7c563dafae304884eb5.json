{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      error: \"\",\n      success: \"\"\n    };\n  },\n  methods: {\n    async login() {\n      // ✅ Clear old session\n      localStorage.removeItem(\"user\");\n      localStorage.removeItem(\"token\");\n      delete axios.defaults.headers.common[\"Authorization\"];\n      try {\n        const response = await axios.post(\"http://localhost:8080/auth/login\", {\n          email: this.email,\n          password: this.password\n        });\n        const token = response.data.token;\n        if (token) {\n          // ✅ Save new token and user\n          localStorage.setItem(\"user\", JSON.stringify(response.data));\n          localStorage.setItem(\"token\", token);\n          axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n          this.success = \"Login successful! Redirecting...\";\n          this.error = \"\";\n          this.redirectUser(\"UserDashboard\");\n        } else {\n          this.error = \"Login failed: token not found in response.\";\n          this.success = \"\";\n        }\n      } catch (err) {\n        this.error = \"Invalid credentials. Please try again.\";\n        this.success = \"\";\n        console.error(\"Login failed:\", err);\n      }\n    },\n    redirectUser(routeName) {\n      this.$router.replace({\n        name: routeName\n      }).then(() => {\n        window.location.reload();\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","email","password","error","success","methods","login","localStorage","removeItem","defaults","headers","common","response","post","token","setItem","JSON","stringify","redirectUser","err","console","routeName","$router","replace","then","window","location","reload"],"sources":["C:\\projet stage 2\\final\\hello-word-vue\\src\\components\\HomePage.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <!-- Gradient Header -->\n    <div class=\"login-header bg-primary-gradient\">\n      <div class=\"container py-5\">\n        <h1 class=\"text-center text-white display-5 fw-bold\">Welcome Back</h1>\n      </div>\n    </div>\n\n    <!-- Login Card -->\n    <div class=\"container py-5\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-8 col-lg-6\">\n          <div class=\"card shadow-lg border-0\">\n            <div class=\"card-body p-4 p-md-5\">\n              <form @submit.prevent=\"login\">\n                <!-- Email Input -->\n                <div class=\"form-floating mb-4\">\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"email\"\n                    v-model=\"email\"\n                    required\n                    autocomplete=\"email\"\n                    placeholder=\"name@example.com\"\n                  />\n                  <label for=\"email\">\n                    <i class=\"bi bi-envelope-fill me-2\"></i>Email address\n                  </label>\n                </div>\n\n                <!-- Password Input -->\n                <div class=\"form-floating mb-4\">\n                  <input\n                    type=\"password\"\n                    class=\"form-control\"\n                    id=\"password\"\n                    v-model=\"password\"\n                    required\n                    autocomplete=\"current-password\"\n                    placeholder=\"Password\"\n                  />\n                  <label for=\"password\">\n                    <i class=\"bi bi-lock-fill me-2\"></i>Password\n                  </label>\n                </div>\n\n                <!-- Submit Button -->\n                <button type=\"submit\" class=\"btn btn-primary w-100 btn-lg mb-4\">\n                  <i class=\"bi bi-box-arrow-in-right me-2\"></i>Sign In\n                </button>\n\n                <!-- Alerts -->\n                <div v-if=\"error\" class=\"alert alert-danger mb-4\">\n                  <i class=\"bi bi-exclamation-circle-fill me-2\"></i>{{ error }}\n                </div>\n                <div v-if=\"success\" class=\"alert alert-success mb-4\">\n                  <i class=\"bi bi-check-circle-fill me-2\"></i>{{ success }}\n                </div>\n\n                <!-- Registration Link -->\n                <div class=\"text-center text-muted mt-4\">\n                  <p class=\"mb-0\">\n                    Don't have an account?\n                    <router-link to=\"/register\" class=\"text-primary fw-bold text-decoration-none\">\n                      Create one now\n                    </router-link>\n                  </p>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      error: \"\",\n      success: \"\",\n    };\n  },\n  methods: {\n    async login() {\n      // ✅ Clear old session\n      localStorage.removeItem(\"user\");\n      localStorage.removeItem(\"token\");\n      delete axios.defaults.headers.common[\"Authorization\"];\n\n      try {\n        const response = await axios.post(\"http://localhost:8080/auth/login\", {\n          email: this.email,\n          password: this.password,\n        });\n\n        const token = response.data.token;\n\n        if (token) {\n          // ✅ Save new token and user\n          localStorage.setItem(\"user\", JSON.stringify(response.data));\n          localStorage.setItem(\"token\", token);\n          axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n\n          this.success = \"Login successful! Redirecting...\";\n          this.error = \"\";\n\n          this.redirectUser(\"UserDashboard\");\n        } else {\n          this.error = \"Login failed: token not found in response.\";\n          this.success = \"\";\n        }\n      } catch (err) {\n        this.error = \"Invalid credentials. Please try again.\";\n        this.success = \"\";\n        console.error(\"Login failed:\", err);\n      }\n    },\n    redirectUser(routeName) {\n      this.$router.replace({ name: routeName }).then(() => {\n        window.location.reload();\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.login-header {\n  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);\n  border-radius: 0 0 2rem 2rem;\n}\n\n.card {\n  border-radius: 1.5rem;\n  margin-top: -4rem;\n}\n\n.form-control {\n  border-radius: 0.75rem;\n  padding: 1rem;\n  border: 1px solid #e5e7eb;\n}\n\n.form-control:focus {\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);\n  border-color: #3b82f6;\n}\n\n.btn-primary {\n  border-radius: 0.75rem;\n  padding: 1rem;\n  transition: all 0.3s ease;\n}\n\n.btn-primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 0.5rem 1rem rgba(59, 130, 246, 0.2);\n}\n\n.alert {\n  border-radius: 0.75rem;\n}\n\n.text-primary {\n  color: #3b82f6 !important;\n}\n\n@media (max-width: 768px) {\n  .card {\n    margin-top: -2rem;\n  }\n\n  .login-header {\n    border-radius: 0 0 1.5rem 1.5rem;\n  }\n}\n</style>\n"],"mappings":"AAgFA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,KAAKA,CAAA,EAAG;MACZ;MACAC,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;MAC/BD,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;MAChC,OAAOV,KAAK,CAACW,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;MAErD,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMd,KAAK,CAACe,IAAI,CAAC,kCAAkC,EAAE;UACpEZ,KAAK,EAAE,IAAI,CAACA,KAAK;UACjBC,QAAQ,EAAE,IAAI,CAACA;QACjB,CAAC,CAAC;QAEF,MAAMY,KAAI,GAAIF,QAAQ,CAACZ,IAAI,CAACc,KAAK;QAEjC,IAAIA,KAAK,EAAE;UACT;UACAP,YAAY,CAACQ,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACL,QAAQ,CAACZ,IAAI,CAAC,CAAC;UAC3DO,YAAY,CAACQ,OAAO,CAAC,OAAO,EAAED,KAAK,CAAC;UACpChB,KAAK,CAACW,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,IAAI,SAAQ,GAAIG,KAAK;UAElE,IAAI,CAACV,OAAM,GAAI,kCAAkC;UACjD,IAAI,CAACD,KAAI,GAAI,EAAE;UAEf,IAAI,CAACe,YAAY,CAAC,eAAe,CAAC;QACpC,OAAO;UACL,IAAI,CAACf,KAAI,GAAI,4CAA4C;UACzD,IAAI,CAACC,OAAM,GAAI,EAAE;QACnB;MACF,EAAE,OAAOe,GAAG,EAAE;QACZ,IAAI,CAAChB,KAAI,GAAI,wCAAwC;QACrD,IAAI,CAACC,OAAM,GAAI,EAAE;QACjBgB,OAAO,CAACjB,KAAK,CAAC,eAAe,EAAEgB,GAAG,CAAC;MACrC;IACF,CAAC;IACDD,YAAYA,CAACG,SAAS,EAAE;MACtB,IAAI,CAACC,OAAO,CAACC,OAAO,CAAC;QAAExB,IAAI,EAAEsB;MAAU,CAAC,CAAC,CAACG,IAAI,CAAC,MAAM;QACnDC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;MAC1B,CAAC,CAAC;IACJ;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}