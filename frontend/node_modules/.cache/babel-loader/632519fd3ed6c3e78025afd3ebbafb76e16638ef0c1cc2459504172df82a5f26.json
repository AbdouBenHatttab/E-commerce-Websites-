{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport AuthService from '@/services/AuthService';\nimport UserService from '@/services/UserService';\nimport { toast } from 'vue3-toastify';\nimport 'vue3-toastify/dist/index.css';\nexport default {\n  name: 'AdminProfile',\n  data() {\n    return {\n      user: null,\n      userForm: {\n        name: '',\n        email: '',\n        phoneNumber: '',\n        address: '',\n        imageUrl: ''\n      },\n      isModalVisible: false,\n      defaultImage: 'https://via.placeholder.com/150'\n    };\n  },\n  computed: {\n    isFormModified() {\n      return JSON.stringify({\n        name: this.user.name,\n        phoneNumber: this.user.phoneNumber,\n        address: this.user.address,\n        imageUrl: this.user.imageUrl\n      }) !== JSON.stringify({\n        name: this.userForm.name,\n        phoneNumber: this.userForm.phoneNumber,\n        address: this.userForm.address,\n        imageUrl: this.userForm.imageUrl\n      });\n    }\n  },\n  async mounted() {\n    this.fetchAdminProfile();\n  },\n  methods: {\n    async fetchAdminProfile() {\n      try {\n        const user = AuthService.getCurrentUser();\n        if (user) {\n          this.user = user;\n          this.userForm = {\n            name: user.name,\n            email: user.email,\n            phoneNumber: user.phoneNumber,\n            address: user.address,\n            imageUrl: user.imageUrl\n          };\n        }\n      } catch (error) {\n        console.error('Error fetching profile:', error);\n        toast.error('Failed to load profile data');\n      }\n    },\n    showModal() {\n      this.isModalVisible = true;\n    },\n    closeModal() {\n      this.isModalVisible = false;\n    },\n    async updateProfile() {\n      try {\n        if (!this.isFormModified) {\n          toast.info('No changes to save');\n          return;\n        }\n        const payload = {\n          name: this.userForm.name,\n          phoneNumber: this.userForm.phoneNumber,\n          address: this.userForm.address,\n          imageUrl: this.userForm.imageUrl\n        };\n        const response = await UserService.updateUser(this.user.id, payload);\n        const updatedUser = {\n          ...this.user,\n          ...response.data\n        };\n        AuthService.setUser(updatedUser);\n        this.user = updatedUser;\n        toast.success('Profile updated successfully');\n        this.closeModal();\n      } catch (error) {\n        console.error('Update error:', error);\n        toast.error(error.response?.data?.message || 'Failed to update profile');\n      }\n    },\n    goBack() {\n      this.$router.push({\n        name: 'AdminDashboard'\n      });\n    }\n  }\n};","map":{"version":3,"names":["AuthService","UserService","toast","name","data","user","userForm","email","phoneNumber","address","imageUrl","isModalVisible","defaultImage","computed","isFormModified","JSON","stringify","mounted","fetchAdminProfile","methods","getCurrentUser","error","console","showModal","closeModal","updateProfile","info","payload","response","updateUser","id","updatedUser","setUser","success","message","goBack","$router","push"],"sources":["C:\\Users\\Hedib\\OneDrive\\Bureau\\hello-word-vue\\src\\components\\admin\\AdminProfile.vue"],"sourcesContent":["<template>\n  <div class=\"container py-5\">\n    <!-- Loading State -->\n    <div\n      v-if=\"!user\"\n      class=\"d-flex justify-content-center align-items-center min-vh-50\"\n    >\n      <div\n        class=\"spinner-border text-primary\"\n        style=\"width: 3rem; height: 3rem\"\n        role=\"status\"\n      >\n        <span class=\"visually-hidden\">Loading...</span>\n      </div>\n    </div>\n\n    <!-- Profile Content -->\n    <div v-else class=\"row g-4 justify-content-center\">\n      <!-- Profile Card -->\n      <div class=\"col-lg-4 col-md-6\">\n        <div class=\"card shadow-lg border-0 rounded-4 h-100\">\n          <div\n            class=\"card-header bg-gradient-primary text-white rounded-top-4 py-4\"\n          >\n            <div class=\"d-flex flex-column align-items-center\">\n              <img\n                :src=\"user.imageUrl || defaultImage\"\n                class=\"img-thumbnail rounded-circle shadow mb-3\"\n                alt=\"Profile\"\n                style=\"width: 150px; height: 150px; object-fit: cover\"\n              />\n              <h3 class=\"mb-0\">{{ user.name }}</h3>\n              <div class=\"d-flex align-items-center mt-2\">\n                <span class=\"badge bg-success me-2\">{{ user.status }}</span>\n                <span class=\"badge bg-info\">{{ user.role }}</span>\n              </div>\n            </div>\n          </div>\n          <div class=\"card-body text-center\">\n            <div class=\"d-grid gap-2\">\n              <button\n                @click=\"showModal\"\n                class=\"btn btn-primary btn-lg rounded-pill\"\n              >\n                <i class=\"bi bi-pencil-square me-2\"></i>Edit Profile\n              </button>\n              <button\n                @click=\"goBack\"\n                class=\"btn btn-outline-secondary btn-lg rounded-pill\"\n              >\n                <i class=\"bi bi-arrow-left me-2\"></i>Back to Dashboard\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Info Card -->\n      <div class=\"col-lg-8 col-md-6\">\n        <div class=\"card shadow-lg border-0 rounded-4 h-100\">\n          <div class=\"card-header bg-light rounded-top-4\">\n            <h5 class=\"card-title mb-0\">\n              <i class=\"bi bi-info-circle me-2\"></i>Personal Information\n            </h5>\n          </div>\n          <div class=\"card-body\">\n            <ul class=\"list-group list-group-flush\">\n              <li class=\"list-group-item d-flex align-items-center\">\n                <i class=\"bi bi-envelope me-3 fs-5 text-primary\"></i>\n                <div>\n                  <h6 class=\"mb-0\">Email</h6>\n                  <p class=\"mb-0 text-muted\">{{ user.email }}</p>\n                </div>\n              </li>\n              <li class=\"list-group-item d-flex align-items-center\">\n                <i class=\"bi bi-telephone me-3 fs-5 text-primary\"></i>\n                <div>\n                  <h6 class=\"mb-0\">Phone</h6>\n                  <p class=\"mb-0 text-muted\">\n                    {{ user.phoneNumber || 'Not provided' }}\n                  </p>\n                </div>\n              </li>\n              <li class=\"list-group-item d-flex align-items-center\">\n                <i class=\"bi bi-geo-alt me-3 fs-5 text-primary\"></i>\n                <div>\n                  <h6 class=\"mb-0\">Address</h6>\n                  <p class=\"mb-0 text-muted\">\n                    {{ user.address || 'Not provided' }}\n                  </p>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Edit Modal -->\n    <div\n      class=\"modal fade\"\n      :class=\"{ show: isModalVisible }\"\n      tabindex=\"-1\"\n      :style=\"isModalVisible ? 'display: block;' : 'display: none;'\"\n    >\n      <div class=\"modal-dialog modal-dialog-centered modal-lg\">\n        <div class=\"modal-content rounded-4 shadow\">\n          <div class=\"modal-header border-bottom-0\">\n            <h3 class=\"modal-title\">\n              <i class=\"bi bi-person-gear me-2\"></i>Edit Profile\n            </h3>\n            <button\n              type=\"button\"\n              class=\"btn-close\"\n              @click=\"closeModal\"\n              aria-label=\"Close\"\n            ></button>\n          </div>\n          <div class=\"modal-body\">\n            <form @submit.prevent=\"updateProfile\">\n              <div class=\"row g-4\">\n                <!-- Image Preview -->\n                <div class=\"col-md-6 text-center\">\n                  <div class=\"border rounded-4 p-3 shadow-sm bg-light\">\n                    <img\n                      :src=\"userForm.imageUrl || defaultImage\"\n                      class=\"img-fluid rounded-3 mb-3\"\n                      alt=\"Preview\"\n                      style=\"max-height: 250px; object-fit: cover\"\n                    />\n                    <div class=\"form-text\">Live Image Preview</div>\n                  </div>\n                </div>\n\n                <!-- Form Fields -->\n                <div class=\"col-md-6\">\n                  <div class=\"mb-3\">\n                    <label class=\"form-label\"\n                      >Full Name <span class=\"text-danger\">*</span></label\n                    >\n                    <input\n                      type=\"text\"\n                      class=\"form-control form-control-lg rounded-3\"\n                      v-model=\"userForm.name\"\n                      required\n                      autofocus\n                    />\n                  </div>\n                  <div class=\"mb-3\">\n                    <label class=\"form-label\">Email Address</label>\n                    <input\n                      type=\"email\"\n                      class=\"form-control form-control-lg rounded-3\"\n                      v-model=\"userForm.email\"\n                      disabled\n                    />\n                  </div>\n                  <div class=\"mb-3\">\n                    <label class=\"form-label\">Phone Number</label>\n                    <input\n                      type=\"tel\"\n                      class=\"form-control form-control-lg rounded-3\"\n                      v-model=\"userForm.phoneNumber\"\n                      placeholder=\"Enter 10-digit number\"\n                      pattern=\"[0-9]{10}\"\n                    />\n                  </div>\n                </div>\n\n                <!-- Additional Fields -->\n                <div class=\"col-12\">\n                  <div class=\"mb-3\">\n                    <label class=\"form-label\">Address</label>\n                    <textarea\n                      class=\"form-control form-control-lg rounded-3\"\n                      v-model=\"userForm.address\"\n                      rows=\"2\"\n                      placeholder=\"Enter your full address\"\n                    ></textarea>\n                  </div>\n                  <div class=\"mb-4\">\n                    <label class=\"form-label\">Profile Image URL</label>\n                    <div class=\"input-group\">\n                      <input\n                        type=\"url\"\n                        class=\"form-control form-control-lg rounded-3\"\n                        v-model=\"userForm.imageUrl\"\n                        placeholder=\"https://example.com/profile.jpg\"\n                      />\n                      <button\n                        type=\"button\"\n                        class=\"btn btn-outline-secondary\"\n                        @click=\"userForm.imageUrl = ''\"\n                      >\n                        Clear\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Modal Footer -->\n              <div class=\"modal-footer border-top-0 pt-4\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn-lg btn-outline-secondary rounded-pill px-4\"\n                  @click=\"closeModal\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  class=\"btn btn-lg btn-primary rounded-pill px-4\"\n                  :disabled=\"!isFormModified\"\n                >\n                  <i class=\"bi bi-save me-2\"></i>Save Changes\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"modal-backdrop fade\"\n      :class=\"{ show: isModalVisible }\"\n      @click=\"closeModal\"\n      :style=\"isModalVisible ? 'display: block;' : 'display: none;'\"\n    ></div>\n  </div>\n</template>\n\n<script>\nimport AuthService from '@/services/AuthService';\nimport UserService from '@/services/UserService';\nimport { toast } from 'vue3-toastify';\nimport 'vue3-toastify/dist/index.css';\n\nexport default {\n  name: 'AdminProfile',\n  data() {\n    return {\n      user: null,\n      userForm: {\n        name: '',\n        email: '',\n        phoneNumber: '',\n        address: '',\n        imageUrl: '',\n      },\n      isModalVisible: false,\n      defaultImage: 'https://via.placeholder.com/150',\n    };\n  },\n  computed: {\n    isFormModified() {\n      return (\n        JSON.stringify({\n          name: this.user.name,\n          phoneNumber: this.user.phoneNumber,\n          address: this.user.address,\n          imageUrl: this.user.imageUrl,\n        }) !==\n        JSON.stringify({\n          name: this.userForm.name,\n          phoneNumber: this.userForm.phoneNumber,\n          address: this.userForm.address,\n          imageUrl: this.userForm.imageUrl,\n        })\n      );\n    },\n  },\n  async mounted() {\n    this.fetchAdminProfile();\n  },\n  methods: {\n    async fetchAdminProfile() {\n      try {\n        const user = AuthService.getCurrentUser();\n        if (user) {\n          this.user = user;\n          this.userForm = {\n            name: user.name,\n            email: user.email,\n            phoneNumber: user.phoneNumber,\n            address: user.address,\n            imageUrl: user.imageUrl,\n          };\n        }\n      } catch (error) {\n        console.error('Error fetching profile:', error);\n        toast.error('Failed to load profile data');\n      }\n    },\n    showModal() {\n      this.isModalVisible = true;\n    },\n    closeModal() {\n      this.isModalVisible = false;\n    },\n    async updateProfile() {\n      try {\n        if (!this.isFormModified) {\n          toast.info('No changes to save');\n          return;\n        }\n\n        const payload = {\n          name: this.userForm.name,\n          phoneNumber: this.userForm.phoneNumber,\n          address: this.userForm.address,\n          imageUrl: this.userForm.imageUrl,\n        };\n\n        const response = await UserService.updateUser(this.user.id, payload);\n\n        const updatedUser = {\n          ...this.user,\n          ...response.data,\n        };\n\n        AuthService.setUser(updatedUser);\n        this.user = updatedUser;\n\n        toast.success('Profile updated successfully');\n        this.closeModal();\n      } catch (error) {\n        console.error('Update error:', error);\n        toast.error(\n          error.response?.data?.message || 'Failed to update profile'\n        );\n      }\n    },\n    goBack() {\n      this.$router.push({ name: 'AdminDashboard' });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1050;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  outline: 0;\n}\n\n.modal-backdrop {\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1040;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.modal-content {\n  border: none;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n}\n\n.card {\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 1rem 2.5rem rgba(0, 0, 0, 0.15) !important;\n}\n\n.bg-gradient-primary {\n  background: linear-gradient(135deg, #3b82f6, #6366f1);\n}\n\n.list-group-item {\n  transition: background-color 0.2s ease;\n}\n\n.list-group-item:hover {\n  background-color: rgba(59, 130, 246, 0.05);\n}\n\n.rounded-4 {\n  border-radius: 1rem !important;\n}\n\n.btn-lg {\n  padding: 0.75rem 1.5rem;\n}\n\n.form-control-lg {\n  padding: 0.75rem 1rem;\n}\n\n.input-group button {\n  border-radius: 0 0.5rem 0.5rem 0 !important;\n  border-left: 0;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}