{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"contact-messages-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"alert alert-info\"\n};\nconst _hoisted_3 = {\n  class: \"card-body\"\n};\nconst _hoisted_4 = {\n  class: \"card-title\"\n};\nconst _hoisted_5 = {\n  class: \"card-subtitle mb-2 text-muted\"\n};\nconst _hoisted_6 = {\n  class: \"card-text\"\n};\nconst _hoisted_7 = {\n  class: \"card-text\"\n};\nconst _hoisted_8 = {\n  class: \"text-muted\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"d-flex justify-content-end\"\n};\nconst _hoisted_10 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"h2\", {\n    class: \"text-center mb-4\"\n  }, \"Contact Us Messages\", -1 /* HOISTED */)), _createCommentVNode(\" No messages available \"), $data.messages.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \" No messages available. \")) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Messages List \"), _createElementVNode(\"div\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, message => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: message.id,\n      class: \"card mb-3 shadow-sm\"\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h5\", _hoisted_4, _toDisplayString(message.name), 1 /* TEXT */), _createElementVNode(\"h6\", _hoisted_5, _toDisplayString(message.email), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_6, _toDisplayString(message.message), 1 /* TEXT */), _createCommentVNode(\" Display formatted timestamp \"), _createElementVNode(\"p\", _hoisted_7, [_createElementVNode(\"small\", _hoisted_8, \" Sent on: \" + _toDisplayString($options.formatTimestamp(message.timestamp)), 1 /* TEXT */)]), _createCommentVNode(\" Admin Delete Button \"), $options.isAdmin ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"button\", {\n      onClick: $event => $options.deleteMessage(message.id),\n      class: \"btn btn-danger btn-sm shadow-sm\"\n    }, \" Delete \", 8 /* PROPS */, _hoisted_10)])) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */))])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","$data","messages","length","_hoisted_2","_Fragment","_renderList","message","id","_hoisted_3","_hoisted_4","_toDisplayString","name","_hoisted_5","email","_hoisted_6","_hoisted_7","_hoisted_8","$options","formatTimestamp","timestamp","isAdmin","_hoisted_9","onClick","$event","deleteMessage","_hoisted_10"],"sources":["C:\\Users\\Hedib\\OneDrive\\Bureau\\hello-word-vue\\src\\components\\admin\\ContactMessages.vue"],"sourcesContent":["<template>\n  <div class=\"contact-messages-container\">\n    <h2 class=\"text-center mb-4\">Contact Us Messages</h2>\n\n    <!-- No messages available -->\n    <div v-if=\"messages.length === 0\" class=\"alert alert-info\">\n      No messages available.\n    </div>\n\n    <!-- Messages List -->\n    <div v-else>\n      <div\n        v-for=\"message in messages\"\n        :key=\"message.id\"\n        class=\"card mb-3 shadow-sm\"\n      >\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">{{ message.name }}</h5>\n          <h6 class=\"card-subtitle mb-2 text-muted\">{{ message.email }}</h6>\n          <p class=\"card-text\">{{ message.message }}</p>\n\n          <!-- Display formatted timestamp -->\n          <p class=\"card-text\">\n            <small class=\"text-muted\">\n              Sent on: {{ formatTimestamp(message.timestamp) }}\n            </small>\n          </p>\n\n          <!-- Admin Delete Button -->\n          <div v-if=\"isAdmin\" class=\"d-flex justify-content-end\">\n            <button\n              @click=\"deleteMessage(message.id)\"\n              class=\"btn btn-danger btn-sm shadow-sm\"\n            >\n              Delete\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ContactService from '@/services/ContactService';\n\nexport default {\n  name: 'ContactMessages',\n  data() {\n    return {\n      messages: [], // Store the messages fetched from the backend\n    };\n  },\n  computed: {\n    // Check if the user is an admin (can be modified for your authentication mechanism)\n    isAdmin() {\n      return localStorage.getItem('role') === 'ROLE_ADMIN';\n    },\n  },\n  async created() {\n    try {\n      // Fetch messages from the backend API\n      this.messages = await ContactService.getAllMessages();\n    } catch (error) {\n      console.error('Error fetching contact messages:', error);\n    }\n  },\n  methods: {\n    // Format the timestamp to a readable format\n    formatTimestamp(timestamp) {\n      const date = new Date(timestamp);\n      return date.toLocaleString('en-US', {\n        weekday: 'short',\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric',\n      });\n    },\n\n    // Method to delete the message\n    async deleteMessage(id) {\n      try {\n        await ContactService.deleteMessage(id);\n        this.messages = this.messages.filter((message) => message.id !== id);\n      } catch (error) {\n        console.error('Error deleting message:', error);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.contact-messages-container {\n  padding: 30px 20px;\n  background-color: #f9f9f9;\n  border-radius: 8px;\n  max-width: 900px;\n  margin: 0 auto;\n}\n\nh2 {\n  color: #333;\n  font-size: 2rem;\n  font-weight: bold;\n}\n\n.card {\n  border: none;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  background-color: #fff;\n  overflow: hidden;\n}\n\n.card-body {\n  padding: 20px;\n  background-color: #f4f4f4;\n  border-radius: 8px;\n}\n\n.card-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n}\n\n.card-subtitle {\n  font-size: 1rem;\n  color: #6c757d;\n}\n\n.card-text {\n  font-size: 1rem;\n  color: #333;\n}\n\n.text-muted {\n  font-size: 0.875rem;\n}\n\n.btn-danger {\n  font-size: 0.875rem;\n  padding: 8px 15px;\n  background-color: #e74c3c;\n  border-color: #e74c3c;\n  border-radius: 5px;\n  color: white;\n  text-transform: uppercase;\n}\n\n.btn-danger:hover {\n  background-color: #c0392b;\n  border-color: #c0392b;\n  box-shadow: 0 0 10px rgba(192, 57, 43, 0.5);\n}\n\n.d-flex {\n  display: flex;\n}\n\n.justify-content-end {\n  justify-content: flex-end;\n}\n\n.card.mb-3 {\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n.card-body:hover {\n  background-color: #e9ecef;\n  cursor: pointer;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAA4B;;EADzCC,GAAA;EAKsCD,KAAK,EAAC;;;EAW/BA,KAAK,EAAC;AAAW;;EAChBA,KAAK,EAAC;AAAY;;EAClBA,KAAK,EAAC;AAA+B;;EACtCA,KAAK,EAAC;AAAW;;EAGjBA,KAAK,EAAC;AAAW;;EACXA,KAAK,EAAC;AAAY;;EAvBrCC,GAAA;EA6B8BD,KAAK,EAAC;;oBA7BpC;;uBACEE,mBAAA,CAuCM,OAvCNC,UAuCM,G,0BAtCJC,mBAAA,CAAqD;IAAjDJ,KAAK,EAAC;EAAkB,GAAC,qBAAmB,sBAEhDK,mBAAA,2BAA8B,EACnBC,KAAA,CAAAC,QAAQ,CAACC,MAAM,U,cAA1BN,mBAAA,CAEM,OAFNO,UAEM,EAFqD,0BAE3D,M,cAGAP,mBAAA,CA6BMQ,SAAA;IAvCVT,GAAA;EAAA,IASII,mBAAA,mBAAsB,EACtBD,mBAAA,CA6BM,e,kBA5BJF,mBAAA,CA2BMQ,SAAA,QAtCZC,WAAA,CAY0BL,KAAA,CAAAC,QAAQ,EAAnBK,OAAO;yBADhBV,mBAAA,CA2BM;MAzBHD,GAAG,EAAEW,OAAO,CAACC,EAAE;MAChBb,KAAK,EAAC;QAENI,mBAAA,CAqBM,OArBNU,UAqBM,GApBJV,mBAAA,CAA8C,MAA9CW,UAA8C,EAAAC,gBAAA,CAApBJ,OAAO,CAACK,IAAI,kBACtCb,mBAAA,CAAkE,MAAlEc,UAAkE,EAAAF,gBAAA,CAArBJ,OAAO,CAACO,KAAK,kBAC1Df,mBAAA,CAA8C,KAA9CgB,UAA8C,EAAAJ,gBAAA,CAAtBJ,OAAO,CAACA,OAAO,kBAEvCP,mBAAA,iCAAoC,EACpCD,mBAAA,CAII,KAJJiB,UAII,GAHFjB,mBAAA,CAEQ,SAFRkB,UAEQ,EAFkB,YACf,GAAAN,gBAAA,CAAGO,QAAA,CAAAC,eAAe,CAACZ,OAAO,CAACa,SAAS,kB,GAIjDpB,mBAAA,yBAA4B,EACjBkB,QAAA,CAAAG,OAAO,I,cAAlBxB,mBAAA,CAOM,OAPNyB,UAOM,GANJvB,mBAAA,CAKS;MAJNwB,OAAK,EAAAC,MAAA,IAAEN,QAAA,CAAAO,aAAa,CAAClB,OAAO,CAACC,EAAE;MAChCb,KAAK,EAAC;OACP,UAED,iBAnCZ+B,WAAA,E,KAAA1B,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}