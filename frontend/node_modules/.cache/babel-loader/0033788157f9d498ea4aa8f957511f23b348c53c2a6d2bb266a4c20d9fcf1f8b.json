{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.reduce.js\";\nimport CartService from '@/services/CartService';\nimport AuthService from '@/services/AuthService';\nexport default {\n  name: 'UserCart',\n  data() {\n    return {\n      cartItems: [],\n      userId: null,\n      isLoading: true,\n      taxRate: 0.08 // Example tax rate\n    };\n  },\n  computed: {\n    itemCount() {\n      return this.cartItems.reduce((acc, item) => acc + item.quantity, 0);\n    },\n    subtotal() {\n      return this.cartItems.reduce((acc, item) => acc + item.product.price * item.quantity, 0).toFixed(2);\n    },\n    tax() {\n      return (this.subtotal * this.taxRate).toFixed(2);\n    },\n    total() {\n      return (parseFloat(this.subtotal) + parseFloat(this.tax)).toFixed(2);\n    }\n  },\n  async created() {\n    try {\n      const user = AuthService.getCurrentUser();\n      console.log('Retrieved user:', user);\n      if (!user || !user.id) {\n        console.error('User not authenticated!');\n        return;\n      }\n      this.userId = user.id;\n      const response = await CartService.getCart(this.userId);\n      console.log('Cart API Response:', response.data); // Debug API response\n\n      if (response.data && response.data.items && Array.isArray(response.data.items)) {\n        this.cartItems = [...response.data.items]; // Ensure reactivity\n        console.log('Final Cart Items (Processed):', this.cartItems);\n      } else {\n        console.warn('Cart response does not contain expected structure:', response.data);\n        this.cartItems = [];\n      }\n    } catch (error) {\n      console.error('Error fetching cart items:', error);\n    } finally {\n      this.isLoading = false;\n    }\n  },\n  methods: {\n    async removeFromCart(productId) {\n      try {\n        await CartService.removeFromCart(this.userId, productId);\n        this.cartItems = this.cartItems.filter(item => item.product.id !== productId);\n      } catch (error) {\n        console.error('Error removing item from cart:', error);\n      }\n    },\n    async updateQuantity(productId, newQuantity) {\n      if (newQuantity < 1) return;\n      try {\n        await CartService.updateQuantity(productId, newQuantity);\n        const item = this.cartItems.find(i => i.product.id === productId);\n        if (item) item.quantity = newQuantity;\n      } catch (error) {\n        console.error('Error updating quantity:', error);\n      }\n    },\n    proceedToCheckout() {\n      // Implement checkout logic\n      alert('Proceeding to checkout...');\n    }\n  }\n};","map":{"version":3,"names":["CartService","AuthService","name","data","cartItems","userId","isLoading","taxRate","computed","itemCount","reduce","acc","item","quantity","subtotal","product","price","toFixed","tax","total","parseFloat","created","user","getCurrentUser","console","log","id","error","response","getCart","items","Array","isArray","warn","methods","removeFromCart","productId","filter","updateQuantity","newQuantity","find","i","proceedToCheckout","alert"],"sources":["C:\\Users\\Hedib\\OneDrive\\Bureau\\hello-word-vue\\src\\components\\user\\UserCart.vue"],"sourcesContent":["<template>\n  <div class=\"container py-5\">\n    <!-- Cart Header -->\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\n      <h2 class=\"mb-0 display-6 fw-bold text-primary\">Shopping Cart</h2>\n      <router-link to=\"/user/dashboard\" class=\"btn btn-outline-primary\">\n        <i class=\"bi bi-arrow-left me-2\"></i>Continue Shopping\n      </router-link>\n    </div>\n\n    <!-- Empty State -->\n    <div v-if=\"cartItems.length === 0\" class=\"empty-cart text-center py-5\">\n      <div class=\"empty-icon mb-4\">\n        <i class=\"bi bi-cart-x fs-1 text-muted\"></i>\n      </div>\n      <h3 class=\"text-secondary mb-3\">Your cart is empty</h3>\n      <p class=\"text-muted\">Start adding items to see them here</p>\n    </div>\n\n    <!-- Cart Items -->\n    <div v-else class=\"cart-items\">\n      <div class=\"row g-4\">\n        <!-- Cart Item Card -->\n        <div v-for=\"item in cartItems\" :key=\"item.product.id\" class=\"col-12\">\n          <div class=\"card shadow-sm border-0 h-100\">\n            <div class=\"card-body p-4\">\n              <div class=\"row g-4 align-items-center\">\n                <!-- Product Image -->\n                <div class=\"col-md-3\">\n                  <img\n                    :src=\"\n                      item.product.imageUrl || 'https://via.placeholder.com/200'\n                    \"\n                    alt=\"Product image\"\n                    class=\"img-fluid rounded-3\"\n                    style=\"height: 150px; object-fit: cover\"\n                  />\n                </div>\n\n                <!-- Product Info -->\n                <div class=\"col-md-6\">\n                  <h5 class=\"card-title fw-bold mb-2\">\n                    {{ item.product.name }}\n                  </h5>\n                  <p class=\"text-muted mb-2\">\n                    SKU: {{ item.product.sku || 'N/A' }}\n                  </p>\n                  <div class=\"d-flex align-items-center gap-2\">\n                    <span class=\"h5 mb-0\">${{ item.product.price }}</span>\n                    <small class=\"text-muted\">each</small>\n                  </div>\n                </div>\n\n                <!-- Quantity Controls -->\n                <div class=\"col-md-3\">\n                  <div class=\"d-flex flex-column gap-3\">\n                    <div class=\"d-flex align-items-center gap-2\">\n                      <button\n                        @click=\"\n                          updateQuantity(item.product.id, item.quantity - 1)\n                        \"\n                        class=\"btn btn-outline-secondary\"\n                        :disabled=\"item.quantity <= 1\"\n                      >\n                        <i class=\"bi bi-dash\"></i>\n                      </button>\n\n                      <input\n                        type=\"number\"\n                        class=\"form-control text-center\"\n                        v-model.number=\"item.quantity\"\n                        @change=\"updateQuantity(item.product.id, item.quantity)\"\n                        min=\"1\"\n                        style=\"max-width: 70px\"\n                      />\n\n                      <button\n                        @click=\"\n                          updateQuantity(item.product.id, item.quantity + 1)\n                        \"\n                        class=\"btn btn-outline-secondary\"\n                      >\n                        <i class=\"bi bi-plus\"></i>\n                      </button>\n                    </div>\n\n                    <button\n                      @click=\"removeFromCart(item.product.id)\"\n                      class=\"btn btn-link text-danger p-0\"\n                    >\n                      <i class=\"bi bi-trash me-2\"></i>Remove\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Cart Summary -->\n      <div class=\"row mt-5\">\n        <div class=\"col-lg-4 ms-auto\">\n          <div class=\"card border-0 shadow-sm\">\n            <div class=\"card-body p-4\">\n              <h5 class=\"fw-bold mb-4\">Order Summary</h5>\n              <div class=\"d-flex justify-content-between mb-3\">\n                <span>Subtotal ({{ itemCount }} items)</span>\n                <span>${{ subtotal }}</span>\n              </div>\n              <div class=\"d-flex justify-content-between mb-4\">\n                <span>Estimated Tax</span>\n                <span>${{ tax }}</span>\n              </div>\n              <hr class=\"my-3\" />\n              <div class=\"d-flex justify-content-between fw-bold\">\n                <span>Total</span>\n                <span>${{ total }}</span>\n              </div>\n              <button\n                class=\"btn btn-primary w-100 mt-4\"\n                @click=\"proceedToCheckout\"\n              >\n                Proceed to Checkout\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport CartService from '@/services/CartService';\nimport AuthService from '@/services/AuthService';\n\nexport default {\n  name: 'UserCart',\n  data() {\n    return {\n      cartItems: [],\n      userId: null,\n      isLoading: true,\n      taxRate: 0.08, // Example tax rate\n    };\n  },\n  computed: {\n    itemCount() {\n      return this.cartItems.reduce((acc, item) => acc + item.quantity, 0);\n    },\n    subtotal() {\n      return this.cartItems\n        .reduce((acc, item) => acc + item.product.price * item.quantity, 0)\n        .toFixed(2);\n    },\n    tax() {\n      return (this.subtotal * this.taxRate).toFixed(2);\n    },\n    total() {\n      return (parseFloat(this.subtotal) + parseFloat(this.tax)).toFixed(2);\n    },\n  },\n  async created() {\n    try {\n      const user = AuthService.getCurrentUser();\n      console.log('Retrieved user:', user);\n      if (!user || !user.id) {\n        console.error('User not authenticated!');\n        return;\n      }\n      this.userId = user.id;\n\n      const response = await CartService.getCart(this.userId);\n      console.log('Cart API Response:', response.data); // Debug API response\n\n      if (\n        response.data &&\n        response.data.items &&\n        Array.isArray(response.data.items)\n      ) {\n        this.cartItems = [...response.data.items]; // Ensure reactivity\n        console.log('Final Cart Items (Processed):', this.cartItems);\n      } else {\n        console.warn(\n          'Cart response does not contain expected structure:',\n          response.data\n        );\n        this.cartItems = [];\n      }\n    } catch (error) {\n      console.error('Error fetching cart items:', error);\n    } finally {\n      this.isLoading = false;\n    }\n  },\n  methods: {\n    async removeFromCart(productId) {\n      try {\n        await CartService.removeFromCart(this.userId, productId);\n        this.cartItems = this.cartItems.filter(\n          (item) => item.product.id !== productId\n        );\n      } catch (error) {\n        console.error('Error removing item from cart:', error);\n      }\n    },\n    async updateQuantity(productId, newQuantity) {\n      if (newQuantity < 1) return;\n      try {\n        await CartService.updateQuantity(productId, newQuantity);\n        const item = this.cartItems.find((i) => i.product.id === productId);\n        if (item) item.quantity = newQuantity;\n      } catch (error) {\n        console.error('Error updating quantity:', error);\n      }\n    },\n    proceedToCheckout() {\n      // Implement checkout logic\n      alert('Proceeding to checkout...');\n    },\n  },\n};\n</script>\n\n<style scoped>\n.cart-items {\n  transition: all 0.3s ease;\n}\n\n.card {\n  border-radius: 12px;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.card:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);\n}\n\n.btn-outline-secondary {\n  border-radius: 8px;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.empty-cart {\n  background: rgba(243, 244, 246, 0.5);\n  border-radius: 16px;\n}\n\n.form-control {\n  border-radius: 8px;\n  padding: 0.5rem 1rem;\n}\n\n.form-control:focus {\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);\n}\n\n@media (max-width: 768px) {\n  .card-title {\n    font-size: 1.1rem;\n  }\n\n  .btn-outline-secondary {\n    width: 35px;\n    height: 35px;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}