{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport CartService from '@/services/CartService';\nimport AuthService from '@/services/AuthService';\nexport default {\n  data() {\n    return {\n      cartItems: [],\n      userId: null,\n      isLoading: true\n    };\n  },\n  async created() {\n    try {\n      const user = AuthService.getCurrentUser();\n      console.log('Retrieved user:', user);\n      if (!user || !user.id) {\n        console.error('User not authenticated!');\n        return;\n      }\n      this.userId = user.id;\n      const response = await CartService.getCart(this.userId);\n      console.log('Cart API Response:', response.data); // Debugging API response\n\n      if (response.data && Array.isArray(response.data.items)) {\n        this.cartItems = response.data.items.filter(item => item.product);\n        console.log('Final Cart Items:', this.cartItems);\n      } else {\n        console.warn('Cart response does not contain expected structure:', response.data);\n        this.cartItems = [];\n      }\n    } catch (error) {\n      console.error('Error fetching cart items:', error);\n    } finally {\n      this.isLoading = false;\n    }\n  },\n  methods: {\n    async removeFromCart(productId) {\n      try {\n        await CartService.removeFromCart(this.userId, productId);\n        this.cartItems = this.cartItems.filter(item => item.product.id !== productId);\n      } catch (error) {\n        console.error('Error removing item from cart:', error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["CartService","AuthService","data","cartItems","userId","isLoading","created","user","getCurrentUser","console","log","id","error","response","getCart","Array","isArray","items","filter","item","product","warn","methods","removeFromCart","productId"],"sources":["C:\\Users\\Hedib\\OneDrive\\Bureau\\hello-word-vue\\src\\components\\user\\UserCart.vue"],"sourcesContent":["<template>\n  <div class=\"container py-5\">\n    <h2 class=\"mb-4 text-primary\">Shopping Cart</h2>\n\n    <!-- Loading State -->\n    <div v-if=\"isLoading\" class=\"text-center py-5\">\n      <div class=\"spinner-border text-primary\" role=\"status\"></div>\n    </div>\n\n    <!-- Empty State -->\n    <div v-else-if=\"cartItems.length === 0\" class=\"text-center py-5\">\n      <i class=\"bi bi-cart-x fs-1 text-muted\"></i>\n      <h3 class=\"text-secondary\">Your cart is empty</h3>\n    </div>\n\n    <!-- Cart Items -->\n    <div v-else class=\"cart-items\">\n      <div class=\"row g-4\">\n        <div v-for=\"item in cartItems\" :key=\"item.product.id\" class=\"col-12\">\n          <div class=\"card shadow-sm border-0\">\n            <div class=\"card-body p-4\">\n              <div class=\"row g-4 align-items-center\">\n                <div class=\"col-md-3\">\n                  <img\n                    :src=\"\n                      item.product.imageUrl || 'https://via.placeholder.com/200'\n                    \"\n                    class=\"img-fluid rounded-3\"\n                    style=\"height: 150px; object-fit: cover\"\n                  />\n                </div>\n                <div class=\"col-md-6\">\n                  <h5 class=\"fw-bold\">{{ item.product.name }}</h5>\n                  <p class=\"text-muted\">Price: ${{ item.product.price }}</p>\n                </div>\n                <div class=\"col-md-3\">\n                  <button\n                    @click=\"removeFromCart(item.product.id)\"\n                    class=\"btn btn-danger\"\n                  >\n                    <i class=\"bi bi-trash\"></i> Remove\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport CartService from '@/services/CartService';\nimport AuthService from '@/services/AuthService';\n\nexport default {\n  data() {\n    return {\n      cartItems: [],\n      userId: null,\n      isLoading: true,\n    };\n  },\n  async created() {\n    try {\n      const user = AuthService.getCurrentUser();\n      console.log('Retrieved user:', user);\n      if (!user || !user.id) {\n        console.error('User not authenticated!');\n        return;\n      }\n      this.userId = user.id;\n\n      const response = await CartService.getCart(this.userId);\n      console.log('Cart API Response:', response.data); // Debugging API response\n\n      if (response.data && Array.isArray(response.data.items)) {\n        this.cartItems = response.data.items.filter((item) => item.product);\n        console.log('Final Cart Items:', this.cartItems);\n      } else {\n        console.warn(\n          'Cart response does not contain expected structure:',\n          response.data\n        );\n        this.cartItems = [];\n      }\n    } catch (error) {\n      console.error('Error fetching cart items:', error);\n    } finally {\n      this.isLoading = false;\n    }\n  },\n  methods: {\n    async removeFromCart(productId) {\n      try {\n        await CartService.removeFromCart(this.userId, productId);\n        this.cartItems = this.cartItems.filter(\n          (item) => item.product.id !== productId\n        );\n      } catch (error) {\n        console.error('Error removing item from cart:', error);\n      }\n    },\n  },\n};\n</script>\n"],"mappings":";;AAqDA,OAAOA,WAAU,MAAO,wBAAwB;AAChD,OAAOC,WAAU,MAAO,wBAAwB;AAEhD,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,EAAE;MACbC,MAAM,EAAE,IAAI;MACZC,SAAS,EAAE;IACb,CAAC;EACH,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,IAAI;MACF,MAAMC,IAAG,GAAIN,WAAW,CAACO,cAAc,CAAC,CAAC;MACzCC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEH,IAAI,CAAC;MACpC,IAAI,CAACA,IAAG,IAAK,CAACA,IAAI,CAACI,EAAE,EAAE;QACrBF,OAAO,CAACG,KAAK,CAAC,yBAAyB,CAAC;QACxC;MACF;MACA,IAAI,CAACR,MAAK,GAAIG,IAAI,CAACI,EAAE;MAErB,MAAME,QAAO,GAAI,MAAMb,WAAW,CAACc,OAAO,CAAC,IAAI,CAACV,MAAM,CAAC;MACvDK,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEG,QAAQ,CAACX,IAAI,CAAC,EAAE;;MAElD,IAAIW,QAAQ,CAACX,IAAG,IAAKa,KAAK,CAACC,OAAO,CAACH,QAAQ,CAACX,IAAI,CAACe,KAAK,CAAC,EAAE;QACvD,IAAI,CAACd,SAAQ,GAAIU,QAAQ,CAACX,IAAI,CAACe,KAAK,CAACC,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,OAAO,CAAC;QACnEX,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAACP,SAAS,CAAC;MAClD,OAAO;QACLM,OAAO,CAACY,IAAI,CACV,oDAAoD,EACpDR,QAAQ,CAACX,IACX,CAAC;QACD,IAAI,CAACC,SAAQ,GAAI,EAAE;MACrB;IACF,EAAE,OAAOS,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IACpD,UAAU;MACR,IAAI,CAACP,SAAQ,GAAI,KAAK;IACxB;EACF,CAAC;EACDiB,OAAO,EAAE;IACP,MAAMC,cAAcA,CAACC,SAAS,EAAE;MAC9B,IAAI;QACF,MAAMxB,WAAW,CAACuB,cAAc,CAAC,IAAI,CAACnB,MAAM,EAAEoB,SAAS,CAAC;QACxD,IAAI,CAACrB,SAAQ,GAAI,IAAI,CAACA,SAAS,CAACe,MAAM,CACnCC,IAAI,IAAKA,IAAI,CAACC,OAAO,CAACT,EAAC,KAAMa,SAChC,CAAC;MACH,EAAE,OAAOZ,KAAK,EAAE;QACdH,OAAO,CAACG,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACxD;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}