{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport CartService from '@/services/CartService';\nimport AuthService from '@/services/AuthService';\nexport default {\n  data() {\n    return {\n      cartItems: [],\n      userId: null,\n      isLoading: true\n    };\n  },\n  async created() {\n    try {\n      const user = AuthService.getCurrentUser();\n      if (!user || !user.id) {\n        console.error('User not authenticated!');\n        return;\n      }\n      this.userId = user.id;\n      const response = await CartService.getCart(this.userId);\n      if (response.data && response.data.items) {\n        this.cartItems = response.data.items.filter(item => item.product); // Ensure product exists\n      } else {\n        console.warn('Cart response does not contain expected structure:', response.data);\n        this.cartItems = [];\n      }\n    } catch (error) {\n      console.error('Error fetching cart items:', error);\n    } finally {\n      this.isLoading = false;\n    }\n  },\n  methods: {\n    async clearCart() {\n      try {\n        await CartService.clearCart(this.userId);\n        this.cartItems = [];\n      } catch (error) {\n        console.error('Error clearing cart:', error);\n      }\n    },\n    async removeFromCart(productId) {\n      try {\n        await CartService.removeFromCart(this.userId, productId);\n        this.cartItems = this.cartItems.filter(item => item.product.id !== productId);\n      } catch (error) {\n        console.error('Error removing item from cart:', error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["CartService","AuthService","data","cartItems","userId","isLoading","created","user","getCurrentUser","id","console","error","response","getCart","items","filter","item","product","warn","methods","clearCart","removeFromCart","productId"],"sources":["C:\\Users\\Hedib\\OneDrive\\Bureau\\hello-word-vue\\src\\components\\user\\UserCart.vue"],"sourcesContent":["<template>\n  <div class=\"container py-5\">\n    <h2 class=\"mb-4 text-primary\">Shopping Cart</h2>\n\n    <!-- Loading State -->\n    <div v-if=\"isLoading\" class=\"text-center py-5\">\n      <div class=\"spinner-border text-primary\" role=\"status\"></div>\n    </div>\n\n    <!-- Empty State -->\n    <div v-else-if=\"cartItems.length === 0\" class=\"text-center py-5\">\n      <i class=\"bi bi-cart-x fs-1 text-muted\"></i>\n      <h3 class=\"text-secondary\">Your cart is empty</h3>\n    </div>\n\n    <!-- Cart Items -->\n    <div v-else class=\"cart-items\">\n      <div class=\"row g-4\">\n        <div v-for=\"item in cartItems\" :key=\"item.product.id\" class=\"col-12\">\n          <div class=\"card shadow-sm border-0\">\n            <div class=\"card-body p-4\">\n              <div class=\"row g-4 align-items-center\">\n                <div class=\"col-md-3\">\n                  <img\n                    :src=\"\n                      item.product.imageUrl || 'https://via.placeholder.com/200'\n                    \"\n                    class=\"img-fluid rounded-3\"\n                    style=\"height: 150px; object-fit: cover\"\n                  />\n                </div>\n                <div class=\"col-md-6\">\n                  <h5 class=\"fw-bold\">{{ item.product.name }}</h5>\n                  <p class=\"text-muted\">Price: ${{ item.product.price }}</p>\n                </div>\n                <div class=\"col-md-3\">\n                  <button\n                    @click=\"removeFromCart(item.product.id)\"\n                    class=\"btn btn-danger\"\n                  >\n                    <i class=\"bi bi-trash\"></i> Remove\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport CartService from '@/services/CartService';\nimport AuthService from '@/services/AuthService';\n\nexport default {\n  data() {\n    return {\n      cartItems: [],\n      userId: null,\n      isLoading: true,\n    };\n  },\n  async created() {\n    try {\n      const user = AuthService.getCurrentUser();\n      if (!user || !user.id) {\n        console.error('User not authenticated!');\n        return;\n      }\n      this.userId = user.id;\n\n      const response = await CartService.getCart(this.userId);\n      if (response.data && response.data.items) {\n        this.cartItems = response.data.items.filter((item) => item.product); // Ensure product exists\n      } else {\n        console.warn(\n          'Cart response does not contain expected structure:',\n          response.data\n        );\n        this.cartItems = [];\n      }\n    } catch (error) {\n      console.error('Error fetching cart items:', error);\n    } finally {\n      this.isLoading = false;\n    }\n  },\n  methods: {\n    async clearCart() {\n      try {\n        await CartService.clearCart(this.userId);\n        this.cartItems = [];\n      } catch (error) {\n        console.error('Error clearing cart:', error);\n      }\n    },\n    async removeFromCart(productId) {\n      try {\n        await CartService.removeFromCart(this.userId, productId);\n        this.cartItems = this.cartItems.filter(\n          (item) => item.product.id !== productId\n        );\n      } catch (error) {\n        console.error('Error removing item from cart:', error);\n      }\n    },\n  },\n};\n</script>\n"],"mappings":";;AAqDA,OAAOA,WAAU,MAAO,wBAAwB;AAChD,OAAOC,WAAU,MAAO,wBAAwB;AAEhD,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,EAAE;MACbC,MAAM,EAAE,IAAI;MACZC,SAAS,EAAE;IACb,CAAC;EACH,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,IAAI;MACF,MAAMC,IAAG,GAAIN,WAAW,CAACO,cAAc,CAAC,CAAC;MACzC,IAAI,CAACD,IAAG,IAAK,CAACA,IAAI,CAACE,EAAE,EAAE;QACrBC,OAAO,CAACC,KAAK,CAAC,yBAAyB,CAAC;QACxC;MACF;MACA,IAAI,CAACP,MAAK,GAAIG,IAAI,CAACE,EAAE;MAErB,MAAMG,QAAO,GAAI,MAAMZ,WAAW,CAACa,OAAO,CAAC,IAAI,CAACT,MAAM,CAAC;MACvD,IAAIQ,QAAQ,CAACV,IAAG,IAAKU,QAAQ,CAACV,IAAI,CAACY,KAAK,EAAE;QACxC,IAAI,CAACX,SAAQ,GAAIS,QAAQ,CAACV,IAAI,CAACY,KAAK,CAACC,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,OAAO,CAAC,EAAE;MACvE,OAAO;QACLP,OAAO,CAACQ,IAAI,CACV,oDAAoD,EACpDN,QAAQ,CAACV,IACX,CAAC;QACD,IAAI,CAACC,SAAQ,GAAI,EAAE;MACrB;IACF,EAAE,OAAOQ,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IACpD,UAAU;MACR,IAAI,CAACN,SAAQ,GAAI,KAAK;IACxB;EACF,CAAC;EACDc,OAAO,EAAE;IACP,MAAMC,SAASA,CAAA,EAAG;MAChB,IAAI;QACF,MAAMpB,WAAW,CAACoB,SAAS,CAAC,IAAI,CAAChB,MAAM,CAAC;QACxC,IAAI,CAACD,SAAQ,GAAI,EAAE;MACrB,EAAE,OAAOQ,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C;IACF,CAAC;IACD,MAAMU,cAAcA,CAACC,SAAS,EAAE;MAC9B,IAAI;QACF,MAAMtB,WAAW,CAACqB,cAAc,CAAC,IAAI,CAACjB,MAAM,EAAEkB,SAAS,CAAC;QACxD,IAAI,CAACnB,SAAQ,GAAI,IAAI,CAACA,SAAS,CAACY,MAAM,CACnCC,IAAI,IAAKA,IAAI,CAACC,OAAO,CAACR,EAAC,KAAMa,SAChC,CAAC;MACH,EAAE,OAAOX,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACxD;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}