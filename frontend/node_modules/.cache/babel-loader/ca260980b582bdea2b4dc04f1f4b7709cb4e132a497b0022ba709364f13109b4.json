{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment, renderList as _renderList, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"contact-messages-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"text-center\"\n};\nconst _hoisted_3 = {\n  class: \"card-body\"\n};\nconst _hoisted_4 = {\n  class: \"card-title font-weight-bold text-primary\"\n};\nconst _hoisted_5 = {\n  class: \"card-subtitle mb-3 text-muted\"\n};\nconst _hoisted_6 = {\n  class: \"card-text text-dark\"\n};\nconst _hoisted_7 = {\n  class: \"timestamp\"\n};\nconst _hoisted_8 = {\n  class: \"text-muted\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"d-flex justify-content-end mt-3\"\n};\nconst _hoisted_10 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[2] || (_cache[2] = _createElementVNode(\"h2\", {\n    class: \"text-center mb-4\"\n  }, \"Contact Us Messages\", -1 /* HOISTED */)), _createCommentVNode(\" Loading state \"), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _cache[0] || (_cache[0] = [_createElementVNode(\"div\", {\n    class: \"spinner-border text-primary\",\n    role: \"status\"\n  }, [_createElementVNode(\"span\", {\n    class: \"visually-hidden\"\n  }, \"Loading...\")], -1 /* HOISTED */)]))) : $data.messages.length === 0 ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" No messages available \"), _cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n    class: \"alert alert-info\"\n  }, \" No messages available. \", -1 /* HOISTED */))], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [_createCommentVNode(\" Messages List \"), _createElementVNode(\"div\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, message => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: message.id,\n      class: \"card mb-4 shadow-sm hover-card\"\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h5\", _hoisted_4, _toDisplayString(message.name), 1 /* TEXT */), _createElementVNode(\"h6\", _hoisted_5, _toDisplayString(message.email), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_6, _toDisplayString(message.message), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"small\", _hoisted_8, \" Sent on: \" + _toDisplayString($options.formatTimestamp(message.timestamp)), 1 /* TEXT */)]), _createCommentVNode(\" Admin Delete Button \"), $options.isAdmin ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"button\", {\n      onClick: $event => $options.confirmDelete(message.id),\n      class: \"btn btn-danger btn-sm shadow-sm\",\n      \"aria-label\": \"Delete message\"\n    }, \" Delete \", 8 /* PROPS */, _hoisted_10)])) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */))])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","$data","loading","_hoisted_2","_cache","role","messages","length","_Fragment","_renderList","message","id","_hoisted_3","_hoisted_4","_toDisplayString","name","_hoisted_5","email","_hoisted_6","_hoisted_7","_hoisted_8","$options","formatTimestamp","timestamp","isAdmin","_hoisted_9","onClick","$event","confirmDelete","_hoisted_10"],"sources":["C:\\Users\\Hedib\\OneDrive\\Bureau\\hello-word-vue\\src\\components\\admin\\ContactMessages.vue"],"sourcesContent":["<template>\n  <div class=\"contact-messages-container\">\n    <h2 class=\"text-center mb-4\">Contact Us Messages</h2>\n\n    <!-- Loading state -->\n    <div v-if=\"loading\" class=\"text-center\">\n      <div class=\"spinner-border text-primary\" role=\"status\">\n        <span class=\"visually-hidden\">Loading...</span>\n      </div>\n    </div>\n\n    <!-- No messages available -->\n    <div v-else-if=\"messages.length === 0\" class=\"alert alert-info\">\n      No messages available.\n    </div>\n\n    <!-- Messages List -->\n    <div v-else>\n      <div\n        v-for=\"message in messages\"\n        :key=\"message.id\"\n        class=\"card mb-4 shadow-sm hover-card\"\n      >\n        <div class=\"card-body\">\n          <h5 class=\"card-title font-weight-bold text-primary\">\n            {{ message.name }}\n          </h5>\n          <h6 class=\"card-subtitle mb-3 text-muted\">{{ message.email }}</h6>\n          <p class=\"card-text text-dark\">{{ message.message }}</p>\n\n          <div class=\"timestamp\">\n            <small class=\"text-muted\">\n              Sent on: {{ formatTimestamp(message.timestamp) }}\n            </small>\n          </div>\n\n          <!-- Admin Delete Button -->\n          <div v-if=\"isAdmin\" class=\"d-flex justify-content-end mt-3\">\n            <button\n              @click=\"confirmDelete(message.id)\"\n              class=\"btn btn-danger btn-sm shadow-sm\"\n              aria-label=\"Delete message\"\n            >\n              Delete\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ContactService from '@/services/ContactService';\n\nexport default {\n  name: 'ContactMessages',\n  data() {\n    return {\n      messages: [],\n      loading: true,\n      error: null\n    };\n  },\n  computed: {\n    isAdmin() {\n      return localStorage.getItem('role') === 'ROLE_ADMIN';\n    },\n  },\n  async created() {\n    if (!this.isAdmin) {\n      this.$router.push('/login');\n      return;\n    }\n    \n    try {\n      this.messages = await ContactService.getAllMessages();\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n      this.error = 'Failed to load messages. Please try again later.';\n    } finally {\n      this.loading = false;\n    }\n  },\n  methods: {\n    formatTimestamp(timestamp) {\n      return new Date(timestamp).toLocaleString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: '2-digit',\n      });\n    },\n\n    async confirmDelete(id) {\n      if (confirm('Are you sure you want to delete this message?')) {\n        try {\n          await ContactService.deleteMessage(id);\n          this.messages = this.messages.filter(message => message.id !== id);\n        } catch (error) {\n          console.error('Delete error:', error);\n          alert('Failed to delete message. Please try again.');\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.contact-messages-container {\n  padding: 2rem;\n  max-width: 800px;\n  margin: 0 auto;\n}\n\n.card {\n  border-radius: 8px;\n  transition: transform 0.2s ease;\n}\n\n.card:hover {\n  transform: translateY(-3px);\n}\n\n.card-body {\n  padding: 1.5rem;\n}\n\n.btn-danger {\n  background-color: #dc3545;\n  border: none;\n  padding: 0.375rem 0.75rem;\n  font-size: 0.875rem;\n}\n\n.btn-danger:hover {\n  background-color: #bb2d3b;\n}\n\n.text-primary {\n  color: #0d6efd !important;\n}\n\n.spinner-border {\n  width: 3rem;\n  height: 3rem;\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAA4B;;EADzCC,GAAA;EAKwBD,KAAK,EAAC;;;EAkBjBA,KAAK,EAAC;AAAW;;EAChBA,KAAK,EAAC;AAA0C;;EAGhDA,KAAK,EAAC;AAA+B;;EACtCA,KAAK,EAAC;AAAqB;;EAEzBA,KAAK,EAAC;AAAW;;EACbA,KAAK,EAAC;AAAY;;EA/BrCC,GAAA;EAqC8BD,KAAK,EAAC;;oBArCpC;;uBACEE,mBAAA,CAgDM,OAhDNC,UAgDM,G,0BA/CJC,mBAAA,CAAqD;IAAjDJ,KAAK,EAAC;EAAkB,GAAC,qBAAmB,sBAEhDK,mBAAA,mBAAsB,EACXC,KAAA,CAAAC,OAAO,I,cAAlBL,mBAAA,CAIM,OAJNM,UAIM,EAAAC,MAAA,QAAAA,MAAA,OAHJL,mBAAA,CAEM;IAFDJ,KAAK,EAAC,6BAA6B;IAACU,IAAI,EAAC;MAC5CN,mBAAA,CAA+C;IAAzCJ,KAAK,EAAC;EAAiB,GAAC,YAAU,E,0BAK5BM,KAAA,CAAAK,QAAQ,CAACC,MAAM,U,cAA/BV,mBAAA,CAEMW,SAAA;IAdVZ,GAAA;EAAA,IAWII,mBAAA,2BAA8B,E,0BAC9BD,mBAAA,CAEM;IAFiCJ,KAAK,EAAC;EAAkB,GAAC,0BAEhE,qB,mEAGAE,mBAAA,CA+BMW,SAAA;IAhDVZ,GAAA;EAAA,IAgBII,mBAAA,mBAAsB,EACtBD,mBAAA,CA+BM,e,kBA9BJF,mBAAA,CA6BMW,SAAA,QA/CZC,WAAA,CAmB0BR,KAAA,CAAAK,QAAQ,EAAnBI,OAAO;yBADhBb,mBAAA,CA6BM;MA3BHD,GAAG,EAAEc,OAAO,CAACC,EAAE;MAChBhB,KAAK,EAAC;QAENI,mBAAA,CAuBM,OAvBNa,UAuBM,GAtBJb,mBAAA,CAEK,MAFLc,UAEK,EAAAC,gBAAA,CADAJ,OAAO,CAACK,IAAI,kBAEjBhB,mBAAA,CAAkE,MAAlEiB,UAAkE,EAAAF,gBAAA,CAArBJ,OAAO,CAACO,KAAK,kBAC1DlB,mBAAA,CAAwD,KAAxDmB,UAAwD,EAAAJ,gBAAA,CAAtBJ,OAAO,CAACA,OAAO,kBAEjDX,mBAAA,CAIM,OAJNoB,UAIM,GAHJpB,mBAAA,CAEQ,SAFRqB,UAEQ,EAFkB,YACf,GAAAN,gBAAA,CAAGO,QAAA,CAAAC,eAAe,CAACZ,OAAO,CAACa,SAAS,kB,GAIjDvB,mBAAA,yBAA4B,EACjBqB,QAAA,CAAAG,OAAO,I,cAAlB3B,mBAAA,CAQM,OARN4B,UAQM,GAPJ1B,mBAAA,CAMS;MALN2B,OAAK,EAAAC,MAAA,IAAEN,QAAA,CAAAO,aAAa,CAAClB,OAAO,CAACC,EAAE;MAChChB,KAAK,EAAC,iCAAiC;MACvC,YAAU,EAAC;OACZ,UAED,iBA5CZkC,WAAA,E,KAAA7B,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}